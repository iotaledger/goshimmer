!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"==typeof window?"undefined"==typeof global?"undefined"!=typeof self&&(e=self):e=global:e=window,e.Viva=t()}}(function(){return function d(p,e,t){function r(i,o){if(!e[i]){if(!p[i]){var s="function"==typeof require&&require;if(!o&&s)return s(i,!0);if(n)return n(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var u=e[i]={exports:{}};p[i][0].call(u.exports,function(t){var e=p[i][1][t];return r(e?e:t)},u,u.exports,d,p,e,t)}return e[i].exports}for(var n="function"==typeof require&&require,i=0;i<t.length;i++)r(t[i]);return r}({1:[function(e,t){var o=e("ngraph.random"),n={lazyExtend:function(){return e("ngraph.merge").apply(this,arguments)},randomIterator:function(){return o.randomIterator.apply(o,arguments)},random:function(){return o.random.apply(o,arguments)},events:e("ngraph.events")};n.Graph={version:e("./version.js"),graph:e("ngraph.graph"),serializer:function(){return{loadFromJSON:e("ngraph.fromjson"),storeToJSON:e("ngraph.tojson")}},centrality:e("./Algorithms/centrality.js"),operations:e("./Algorithms/operations.js"),geom:function(){return{intersect:e("gintersect"),intersectRect:e("./Utils/intersectRect.js")}},webgl:e("./WebGL/webgl.js"),webglInputEvents:e("./WebGL/webglInputEvents.js"),generator:function(){return e("ngraph.generators")},Input:{domInputManager:e("./Input/domInputManager.js"),webglInputManager:e("./Input/webglInputManager.js")},Utils:{dragndrop:e("./Input/dragndrop.js"),findElementPosition:e("./Utils/findElementPosition.js"),timer:e("./Utils/timer.js"),getDimension:e("./Utils/getDimensions.js"),events:e("./Utils/backwardCompatibleEvents.js")},Layout:{forceDirected:e("ngraph.forcelayout"),constant:e("./Layout/constant.js")},View:{Texture:e("./WebGL/texture.js"),webglAtlas:e("./WebGL/webglAtlas.js"),webglImageNodeProgram:e("./WebGL/webglImageNodeProgram.js"),webglLinkProgram:e("./WebGL/webglLinkProgram.js"),webglNodeProgram:e("./WebGL/webglNodeProgram.js"),webglLine:e("./WebGL/webglLine.js"),webglSquare:e("./WebGL/webglSquare.js"),webglImage:e("./WebGL/webglImage.js"),webglGraphics:e("./View/webglGraphics.js"),_webglUtil:{parseColor:e("./WebGL/parseColor.js")},svgGraphics:e("./View/svgGraphics.js"),renderer:e("./View/renderer.js"),cssGraphics:function(){throw new Error("cssGraphics is deprecated. Please use older version of vivagraph (< 0.7) if you need it")},svgNodeFactory:function(){throw new Error("svgNodeFactory is deprecated. Please use older version of vivagraph (< 0.7) if you need it")},community:function(){throw new Error("community is deprecated. Please use vivagraph < 0.7 if you need it, or `https://github.com/anvaka/ngraph.slpa` module")}},Rect:e("./Utils/rect.js"),svg:e("simplesvg"),BrowserInfo:e("./Utils/browserInfo.js")},t.exports=n},{"./Algorithms/centrality.js":36,"./Algorithms/operations.js":37,"./Input/domInputManager.js":38,"./Input/dragndrop.js":39,"./Input/webglInputManager.js":40,"./Layout/constant.js":41,"./Utils/backwardCompatibleEvents.js":42,"./Utils/browserInfo.js":43,"./Utils/findElementPosition.js":45,"./Utils/getDimensions.js":46,"./Utils/intersectRect.js":47,"./Utils/rect.js":49,"./Utils/timer.js":50,"./View/renderer.js":52,"./View/svgGraphics.js":53,"./View/webglGraphics.js":54,"./WebGL/parseColor.js":55,"./WebGL/texture.js":56,"./WebGL/webgl.js":57,"./WebGL/webglAtlas.js":58,"./WebGL/webglImage.js":59,"./WebGL/webglImageNodeProgram.js":60,"./WebGL/webglInputEvents.js":61,"./WebGL/webglLine.js":62,"./WebGL/webglLinkProgram.js":63,"./WebGL/webglNodeProgram.js":64,"./WebGL/webglSquare.js":65,"./version.js":66,gintersect:3,"ngraph.events":9,"ngraph.forcelayout":11,"ngraph.fromjson":13,"ngraph.generators":14,"ngraph.graph":16,"ngraph.merge":17,"ngraph.random":30,"ngraph.tojson":31,simplesvg:32}],2:[function(e,t){function o(e,t,o,n){return d=d||(document.addEventListener?{add:r,rm:i}:{add:s,rm:a}),d.add(e,t,o,n)}function n(e,t,o,n){return d=d||(document.addEventListener?{add:r,rm:i}:{add:s,rm:a}),d.rm(e,t,o,n)}function r(e,t,o,n){e.addEventListener(t,o,n)}function i(e,t,o,n){e.removeEventListener(t,o,n)}function s(e,t,o,n){if(n)throw new Error("cannot useCapture in oldIE");e.attachEvent("on"+t,o)}function a(e,t,o){e.detachEvent("on"+t,o)}o.removeEventListener=n,o.addEventListener=o,t.exports=o;var d=null},{}],3:[function(e,t){t.exports=function(e,t,o,n,r,i,s,a){var d,l,p,u,c,g,m,f,h,x,y,v,b,L={x:0,y:0};return(d=n-t,p=e-o,c=o*t-e*n,h=d*r+p*i+c,x=d*s+p*a+c,0!==h&&0!==x&&0<=h==4<=x)?null:(l=a-i,u=r-s,g=s*i-r*a,m=l*e+u*t+g,f=l*o+u*n+g,0!==m&&0!==f&&0<=m==0<=f)?null:(y=d*u-l*p,0===y)?null:(v=0>y?-y/2:y/2,v=0,b=p*g-u*c,L.x=(0>b?b-v:b+v)/y,b=l*c-d*g,L.y=(0>b?b-v:b+v)/y,L)}},{}],4:[function(e,t){t.exports.degree=e("./src/degree.js"),t.exports.betweenness=e("./src/betweenness.js"),t.exports.closeness=e("./src/closeness.js"),t.exports.eccentricity=e("./src/eccentricity.js")},{"./src/betweenness.js":5,"./src/closeness.js":6,"./src/degree.js":7,"./src/eccentricity.js":8}],5:[function(e,t){t.exports=function(e,t){function o(e){s=e.id,i(s),n()}function n(){for(e.forEachNode(r);d.length;){for(var t,o=d.pop(),n=(1+c[o])/u[o],i=l[o],a=0;a<i.length;++a)t=i[a],c[t]+=u[t]*n;o!==s&&(g[o]+=c[o])}}function r(e){c[e.id]=0}function i(o){function n(e){i(e.id)}function r(e){var t=e.id;l[t]=[],p[t]=-1,u[t]=0}function i(e){-1===p[e]&&(p[e]=p[s]+1,a.push(e)),p[e]===p[s]+1&&(u[e]+=u[s],l[e].push(s))}for(e.forEachNode(r),p[o]=0,u[o]=1,a.push(o);a.length;){var s=a.shift();d.push(s),e.forEachLinkedNode(s,n,t)}}var s,a=[],d=[],l=Object.create(null),p=Object.create(null),u=Object.create(null),c=Object.create(null),g=Object.create(null);return e.forEachNode(function(e){g[e.id]=0}),e.forEachNode(o),t||Object.keys(g).forEach(function(e){g[e]/=2}),g}},{}],6:[function(e,t){t.exports=function(e,t){function o(e){i=e.id,r(i),n()}function n(){var e=Object.keys(a).map(function(e){return a[e]}).filter(function(e){return-1!==e}),t=e.length,o=e.reduce(function(e,t){return e+t});d[i]=0<o?(t-1)/o:0}function r(o){function n(e){var t=e.id;a[t]=-1}function r(e){var t=e.id;-1===a[t]&&(a[t]=a[i]+1,s.push(t))}for(e.forEachNode(n),a[o]=0,s.push(o);s.length;){var i=s.shift();e.forEachLinkedNode(i,r,t)}}var i,s=[],a=Object.create(null),d=Object.create(null);return e.forEachNode(function(e){d[e.id]=0}),e.forEachNode(o),d}},{}],7:[function(e,t){function o(e,t){var o=0;if(!e)return o;for(var n=0;n<e.length;n+=1)o+=e[n].toId===t?1:0;return o}function n(e,t){var o=0;if(!e)return o;for(var n=0;n<e.length;n+=1)o+=e[n].fromId===t?1:0;return o}function r(e){return e?e.length:0}t.exports=function(e,t){function i(t){var o=e.getLinks(t.id);a[t.id]=s(o,t.id)}var s,a=Object.create(null);if(t=(t||"both").toLowerCase(),"both"===t||"inout"===t)s=r;else if("in"===t)s=o;else if("out"===t)s=n;else throw new Error("Expected centrality degree kind is: in, out or both");return e.forEachNode(i),a}},{}],8:[function(e,t){t.exports=function(e,t){function o(e){i=e.id,r(i),n()}function n(){var e=0;Object.keys(a).forEach(function(t){var o=a[t];e<o&&(e=o)}),d[i]=e}function r(o){function n(e){var t=e.id;a[t]=-1}function r(e){var t=e.id;-1===a[t]&&(a[t]=a[i]+1,s.push(t))}for(e.forEachNode(n),a[o]=0,s.push(o);s.length;){var i=s.shift();e.forEachLinkedNode(i,r,t)}}var i,s=[],a=Object.create(null),d=Object.create(null);return e.forEachNode(function(e){d[e.id]=0}),e.forEachNode(o),d}},{}],9:[function(e,t){function o(e){var t=Object.create(null);return{on:function(o,n,r){if("function"!=typeof n)throw new Error("callback is expected to be a function");var i=t[o];return i||(i=t[o]=[]),i.push({callback:n,ctx:r}),e},off:function(o,n){if("undefined"==typeof o)return t=Object.create(null),e;if(t[o]){if("function"!=typeof n)delete t[o];else for(var r=t[o],s=0;s<r.length;++s)r[s].callback===n&&r.splice(s,1)}return e},fire:function(o){var n=t[o];if(!n)return e;var r;1<arguments.length&&(r=Array.prototype.splice.call(arguments,1));for(var s,a=0;a<n.length;++a)s=n[a],s.callback.apply(s.ctx,r);return e}}}function n(e){if(!e)throw new Error("Eventify cannot use falsy object as events subject");for(var t=["on","fire","off"],o=0;o<t.length;++o)if(e.hasOwnProperty(t[o]))throw new Error("Subject cannot be eventified, since it already has property '"+t[o]+"'")}t.exports=function(e){n(e);var t=o(e);return e.on=t.on,e.off=t.off,e.fire=t.fire,e}},{}],10:[function(e,t){function o(e,t,o){if(e.hasOwnProperty(o)){if("function"==typeof t[o])return;t[o]=function(n){return void 0===n?e[o]:(e[o]=n,t)}}}t.exports=function(e,t,n){var r="[object Array]"===Object.prototype.toString.call(n);if(r)for(var s=0;s<n.length;++s)o(e,t,n[s]);else for(var a in e)o(e,t,a)}},{}],11:[function(e,t){function o(){}t.exports=function(t,r){function i(e){k.fire("stable",e)}function s(e){for(var o,n=0;n<e.length;++n)o=e[n],"add"===o.changeType?(o.node&&a(o.node.id),o.link&&l(o.link)):"remove"===o.changeType&&(o.node&&d(o.node),o.link&&p(o.link));b=t.getNodesCount()}function a(e){var o=y[e];if(!o){var n=t.getNode(e);if(!n)throw new Error("initBody() was called with unknown node id");var r=n.position;if(!r){var i=u(n);r=h.getBestNewBodyPosition(i)}o=h.addBodyAt(r),o.id=e,y[e]=o,c(e),g(n)&&(o.isPinned=!0)}}function d(e){var t=e.id,o=y[t];o&&(y[t]=null,delete y[t],h.removeBody(o))}function l(e){c(e.fromId),c(e.toId);var t=y[e.fromId],o=y[e.toId],n=h.addSpring(t,o,e.length);L(e,n),v[e.id]=n}function p(e){var o=v[e.id];if(o){var n=t.getNode(e.fromId),r=t.getNode(e.toId);n&&c(n.id),r&&c(r.id),delete v[e.id],h.removeSpring(o)}}function u(e){var t=[];if(!e.links)return t;for(var o=Math.min(e.links.length,2),n=0;n<o;++n){var r=e.links[n],s=r.fromId===e.id?y[r.toId]:y[r.fromId];s&&s.pos&&t.push(s)}return t}function c(e){var t=y[e];if(t.mass=x(e),Number.isNaN(t.mass))throw new Error("Node mass should be a number")}function g(e){return e&&(e.isPinned||e.data&&e.data.isPinned)}function m(e){var t=y[e];return t||(a(e),t=y[e]),t}if(!t)throw new Error("Graph structure cannot be undefined");var f=e("ngraph.physics.simulator"),h=f(r),x=function(e){var o=t.getLinks(e);return o?1+o.length/3:1};r&&"function"==typeof r.nodeMass&&(x=r.nodeMass);var y=Object.create(null),v={},b=0,L=h.settings.springTransform||o;(function(){b=0,t.forEachNode(function(e){a(e.id),b+=1}),t.forEachLink(l)})(),function(){t.on("changed",s)}();var E=!1,k={step:function(){if(0===b)return!0;var e=h.step();k.lastMove=e,k.fire("step");var t=e/b,o=.01>=t;return E!==o&&(E=o,i(o)),o},getNodePosition:function(e){return m(e).pos},setNodePosition:function(e){var t=m(e);t.setPosition.apply(t,Array.prototype.slice.call(arguments,1)),h.invalidateBBox()},getLinkPosition:function(e){var t=v[e];if(t)return{from:t.from.pos,to:t.to.pos}},getGraphRect:function(){return h.getBBox()},forEachBody:function(e){Object.keys(y).forEach(function(t){e(y[t],t)})},pinNode:function(e,t){var o=m(e.id);o.isPinned=!!t},isNodePinned:function(e){return m(e.id).isPinned},dispose:function(){t.off("changed",s),k.fire("disposed")},getBody:function(e){return y[e]},getSpring:function(e,o){var n;if(void 0===o)n="object"==typeof e?e.id:e;else{var r=t.hasLink(e,o);if(!r)return;n=r.id}return v[n]},simulator:h,graph:t,lastMove:0};return n(k),k},t.exports.simulator=e("ngraph.physics.simulator");var n=e("ngraph.events")},{"ngraph.events":12,"ngraph.physics.simulator":19}],12:[function(e,t,o){arguments[4][9][0].apply(o,arguments)},{dup:9}],13:[function(e,t){function o(e){return e}t.exports=function(e,t,r){var s;t=t||o,r=r||o,s="string"==typeof e?JSON.parse(e):e;var a,d=n();if(s.links===void 0||s.nodes===void 0)throw new Error("Cannot load graph without links and nodes");for(a=0;a<s.nodes.length;++a){var l=t(s.nodes[a]);if(!l.hasOwnProperty("id"))throw new Error("Graph node format is invalid: Node id is missing");d.addNode(l.id,l.data)}for(a=0;a<s.links.length;++a){var p=r(s.links[a]);if(!p.hasOwnProperty("fromId")||!p.hasOwnProperty("toId"))throw new Error("Graph link format is invalid. Both fromId and toId are required");d.addLink(p.fromId,p.toId,p.data)}return d};var n=e("ngraph.graph")},{"ngraph.graph":16}],14:[function(e,t){function o(t){function o(e){if(!e||0>e)throw new Error("Invalid number of nodes");var o,n=t();for(o=0;o<e-1;++o)n.addLink(o,o+1),n.addLink(e+o,e+o+1),n.addLink(o,e+o);return n.addLink(e-1,2*e-1),n}return{ladder:o,complete:function(e){if(!e||1>e)throw new Error("At least two nodes are expected for complete graph");var o,n,r=t();for(o=0;o<e;++o)for(n=o+1;n<e;++n)o!==n&&r.addLink(o,n);return r},completeBipartite:function(e,o){if(!e||!o||0>e||0>o)throw new Error("Graph dimensions are invalid. Number of nodes in each partition should be greater than 0");var n,r,s=t();for(n=0;n<e;++n)for(r=e;r<e+o;++r)s.addLink(n,r);return s},balancedBinTree:function(e){if(0>e)throw new Error("Invalid number of nodes in balanced tree");var o,n=t(),r=Math.pow(2,e);for(0===e&&n.addNode(1),o=1;o<r;++o){var i=o;n.addLink(i,2*i),n.addLink(i,2*i+1)}return n},path:function(e){if(!e||0>e)throw new Error("Invalid number of nodes");var o,n=t();for(n.addNode(0),o=1;o<e;++o)n.addLink(o-1,o);return n},circularLadder:function(e){if(!e||0>e)throw new Error("Invalid number of nodes");var t=o(e);return t.addLink(0,e-1),t.addLink(e,2*e-1),t},grid:function(e,o){if(1>e||1>o)throw new Error("Invalid number of nodes in grid graph");var n,r,s=t();if(1===e&&1===o)return s.addNode(0),s;for(n=0;n<e;++n)for(r=0;r<o;++r){var a=n+r*e;0<n&&s.addLink(a,n-1+r*e),0<r&&s.addLink(a,n+(r-1)*e)}return s},grid3:function(e,o,n){if(1>e||1>o||1>n)throw new Error("Invalid number of nodes in grid3 graph");var r,s,a,d=t();if(1===e&&1===o&&1===n)return d.addNode(0),d;for(a=0;a<n;++a)for(r=0;r<e;++r)for(s=0;s<o;++s){var l=a*e*o,p=r+s*e+l;0<r&&d.addLink(p,r-1+s*e+l),0<s&&d.addLink(p,r+(s-1)*e+l),0<a&&d.addLink(p,r+s*e+(a-1)*e*o)}return d},noLinks:function(e){if(0>e)throw new Error("Number of nodes should be >= 0");var o,n=t();for(o=0;o<e;++o)n.addNode(o);return n},wattsStrogatz:function(o,n,r,s){if(n>=o)throw new Error("Choose smaller `k`. It cannot be larger than number of nodes `n`");var a,d,l=e("ngraph.random").random(s||42),p=t();for(a=0;a<o;++a)p.addNode(a);for(var u=Math.floor(n/2+1),c=1;c<u;++c)for(a=0;a<o;++a)d=(c+a)%o,p.addLink(a,d);for(c=1;c<u;++c)for(a=0;a<o;++a)if(l.nextDouble()<r){var g=a;d=(c+a)%o;var m=l.next(o),f=m===g||p.hasLink(g,m);if(f&&p.getLinks(g).length===o-1)continue;for(;f;)m=l.next(o),f=m===g||p.hasLink(g,m);var h=p.hasLink(g,d);p.removeLink(h),p.addLink(g,m)}return p},cliqueCircle:function(e,o){function n(e,t){for(var o=0;o<e;++o)r.addNode(o+t);for(var o=0;o<e;++o)for(var n=o+1;n<e;++n)r.addLink(o+t,n+t)}if(1>e)throw new Error("Invalid number of cliqueCount in cliqueCircle");if(1>o)throw new Error("Invalid number of cliqueSize in cliqueCircle");for(var r=t(),s=0;s<e;++s)n(o,s*o),0<s&&r.addLink(s*o,s*o-1);return r.addLink(0,r.getNodesCount()-1),r}}}var n=e("ngraph.graph");t.exports=o(n),t.exports.factory=o},{"ngraph.graph":16,"ngraph.random":15}],15:[function(e,t){function o(e){var t="number"==typeof e?e:+new Date;return new n(t)}function n(e){this.seed=e}function r(){var e=this.seed;return e=4294967295&e+2127912214+(e<<12),e=4294967295&(3345072700^e^e>>>19),e=4294967295&e+374761393+(e<<5),e=4294967295&(e+3550635116^e<<9),e=4294967295&e+4251993797+(e<<3),e=4294967295&(3042594569^e^e>>>16),this.seed=e,(268435455&e)/268435456}t.exports=o,t.exports.random=o,t.exports.randomIterator=function(e,t){var n=t||o();if("function"!=typeof n.next)throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:function(o){var r,s,a;for(r=e.length-1;0<r;--r)s=n.next(r+1),a=e[s],e[s]=e[r],e[r]=a,o(a);e.length&&o(e[0])},shuffle:function(){var o,r,s;for(o=e.length-1;0<o;--o)r=n.next(o+1),s=e[r],e[r]=e[o],e[o]=s;return e}}},n.prototype.next=function(e){return Math.floor(this.nextDouble()*e)},n.prototype.nextDouble=r,n.prototype.uniform=r,n.prototype.gaussian=function(){var e,t,o;do t=2*this.nextDouble()-1,o=2*this.nextDouble()-1,e=t*t+o*o;while(1<=e||0===e);return t*Math.sqrt(-2*Math.log(e)/e)}},{}],16:[function(e,t){function o(e){function t(e,t){j.push({link:e,changeType:t})}function o(e,t){j.push({node:e,changeType:t})}function l(e,t){if(void 0===e)throw new Error("Invalid node identifier");S();var o=p(e);return o?(o.data=t,A(o,"update")):(o=new r(e,t),N++,A(o,"add")),k[e]=o,D(),o}function p(e){return k[e]}function u(e){var t=p(e);if(!t)return!1;S();var o=t.links;if(o){t.links=null;for(var n=0;n<o.length;++n)g(o[n])}return delete k[e],N--,A(t,"remove"),D(),!0}function c(e,t,o){S();var n=p(e)||l(e),r=p(t)||l(t),s=C(e,t,o);return I.push(s),i(n,s),e!==t&&i(r,s),T(s,"add"),D(),s}function g(e){if(!e)return!1;var t=n(e,I);if(0>t)return!1;S(),I.splice(t,1);var o=p(e.fromId),r=p(e.toId);return o&&(t=n(e,o.links),0<=t&&o.links.splice(t,1)),r&&(t=n(e,r.links),0<=t&&r.links.splice(t,1)),T(e,"remove"),D(),!0}function m(e,t){var o,n=p(e);if(!n||!n.links)return null;for(o=0;o<n.links.length;++o){var r=n.links[o];if(r.fromId===e&&r.toId===t)return r}return null}function f(){S(),_(function(e){u(e.id)}),D()}function h(e,t,o){for(var n,r=0;r<e.length;++r){var s=e[r],a=s.fromId===t?s.toId:s.fromId;if(n=o(k[a],s),n)return!0}}function x(e,t,o){for(var n,r,s=0;s<e.length;++s)if(r=e[s],r.fromId===t&&(n=o(k[r.toId],r),n))return!0}function y(){}function v(){P+=1}function b(){P-=1,0==P&&0<j.length&&(R.fire("changed",j),j.length=0)}function L(e){if("function"==typeof e)for(var t=Object.keys(k),o=0;o<t.length;++o)if(e(k[t[o]]))return!0}function E(e){if("function"==typeof e){for(var t in k)if(e(k[t]))return!0}}e=e||{},"uniqueLinkId"in e&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n","\n","Note: there is also change in default behavior: From now own each graph\nis considered to be not a multigraph by default (each edge is unique)."),e.multigraph=e.uniqueLinkId),void 0===e.multigraph&&(e.multigraph=!1);var k="function"==typeof Object.create?Object.create(null):{},I=[],w={},N=0,P=0,_=function(){return Object.keys?L:E}(),C=e.multigraph?function(e,t,o){var n=a(e,t),r=w.hasOwnProperty(n);if(r||m(e,t)){r||(w[n]=0);var i="@"+ ++w[n];n=a(e+i,t+i)}return new s(e,t,o,n)}:function(e,t,o){var n=a(e,t);return new s(e,t,o,n)},j=[],T=y,A=y,S=y,D=y,R={addNode:l,addLink:c,removeLink:g,removeNode:u,getNode:p,getNodesCount:function(){return N},getLinksCount:function(){return I.length},getLinks:function(e){var t=p(e);return t?t.links:null},forEachNode:_,forEachLinkedNode:function(e,t,o){var n=p(e);if(n&&n.links&&"function"==typeof t)return o?x(n.links,e,t):h(n.links,e,t)},forEachLink:function(e){var t,o;if("function"==typeof e)for(t=0,o=I.length;t<o;++t)e(I[t])},beginUpdate:S,endUpdate:D,clear:f,hasLink:m,hasNode:p,getLink:m};return d(R),function(){var e=R.on;R.on=function(){return R.beginUpdate=S=v,R.endUpdate=D=b,T=t,A=o,R.on=e,e.apply(R,arguments)}}(),R}function n(e,t){if(!t)return-1;if(t.indexOf)return t.indexOf(e);var o,n=t.length;for(o=0;o<n;o+=1)if(t[o]===e)return o;return-1}function r(e,t){this.id=e,this.links=null,this.data=t}function i(e,t){e.links?e.links.push(t):e.links=[t]}function s(e,t,o,n){this.fromId=e,this.toId=t,this.data=o,this.id=n}function a(e,t){return e.toString()+"\uD83D\uDC49 "+t.toString()}t.exports=o;var d=e("ngraph.events")},{"ngraph.events":9}],17:[function(e,t){function o(e,t){if(e||(e={}),t)for(var n in t)if(t.hasOwnProperty(n)){var r=e.hasOwnProperty(n),i=typeof t[n],s=!r||typeof e[n]!=i;s?e[n]=t[n]:"object"==i&&(e[n]=o(e[n],t[n]))}return e}t.exports=o},{}],18:[function(e,t){function o(e,t){this.pos=new n(e,t),this.prevPos=new n(e,t),this.force=new n,this.velocity=new n,this.mass=1}function n(e,t){e&&"number"!=typeof e?(this.x="number"==typeof e.x?e.x:0,this.y="number"==typeof e.y?e.y:0):(this.x="number"==typeof e?e:0,this.y="number"==typeof t?t:0)}function r(e,t,o){this.pos=new i(e,t,o),this.prevPos=new i(e,t,o),this.force=new i,this.velocity=new i,this.mass=1}function i(e,t,o){e&&"number"!=typeof e?(this.x="number"==typeof e.x?e.x:0,this.y="number"==typeof e.y?e.y:0,this.z="number"==typeof e.z?e.z:0):(this.x="number"==typeof e?e:0,this.y="number"==typeof t?t:0,this.z="number"==typeof o?o:0)}t.exports={Body:o,Vector2d:n,Body3d:r,Vector3d:i},o.prototype.setPosition=function(e,t){this.prevPos.x=this.pos.x=e,this.prevPos.y=this.pos.y=t},n.prototype.reset=function(){this.x=this.y=0},r.prototype.setPosition=function(e,t,o){this.prevPos.x=this.pos.x=e,this.prevPos.y=this.pos.y=t,this.prevPos.z=this.pos.z=o};i.prototype.reset=function(){this.x=this.y=this.z=0}},{}],19:[function(e,t){t.exports=function(t){function o(){var e,t=g.length;if(t)for(f.insertBodies(g);t--;)e=g[t],e.isPinned||(e.force.reset(),f.updateBodyForce(e),y.update(e));for(t=m.length;t--;)x.update(m[t])}var n=e("./lib/spring"),r=e("ngraph.expose"),i=e("ngraph.merge"),s=e("ngraph.events");t=i(t,{springLength:30,springCoeff:8e-4,gravity:-1.2,theta:.8,dragCoeff:.02,timeStep:20});var a=t.createQuadTree||e("ngraph.quadtreebh"),d=t.createBounds||e("./lib/bounds"),l=t.createDragForce||e("./lib/dragForce"),p=t.createSpringForce||e("./lib/springForce"),u=t.integrator||e("./lib/eulerIntegrator"),c=t.createBody||e("./lib/createBody"),g=[],m=[],f=a(t),h=d(g,t),x=p(t),y=l(t),v=!0,b={bodies:g,quadTree:f,springs:m,settings:t,step:function(){o();var e=u(g,t.timeStep);return h.update(),e},addBody:function(e){if(!e)throw new Error("Body is required");return g.push(e),e},addBodyAt:function(e){if(!e)throw new Error("Body position is required");var t=c(e);return g.push(t),t},removeBody:function(e){if(e){var t=g.indexOf(e);if(!(0>t))return g.splice(t,1),0===g.length&&h.reset(),!0}},addSpring:function(e,t,o,r,i){if(!e||!t)throw new Error("Cannot add null spring to force simulator");"number"!=typeof o&&(o=-1);var s=new n(e,t,o,0<=i?i:-1,r);return m.push(s),s},getTotalMovement:function(){return 0},removeSpring:function(e){if(e){var t=m.indexOf(e);if(-1<t)return m.splice(t,1),!0}},getBestNewBodyPosition:function(e){return h.getBestNewPosition(e)},getBBox:function(){return v&&(h.update(),v=!1),h.box},invalidateBBox:function(){v=!0},gravity:function(e){return void 0===e?t.gravity:(t.gravity=e,f.options({gravity:e}),this)},theta:function(e){return void 0===e?t.theta:(t.theta=e,f.options({theta:e}),this)}};return r(t,b),s(b),b}},{"./lib/bounds":20,"./lib/createBody":21,"./lib/dragForce":22,"./lib/eulerIntegrator":23,"./lib/spring":24,"./lib/springForce":25,"ngraph.events":9,"ngraph.expose":10,"ngraph.merge":17,"ngraph.quadtreebh":26}],20:[function(e,t){t.exports=function(t,o){var n=e("ngraph.random").random(42),r={x1:0,y1:0,x2:0,y2:0};return{box:r,update:function(){var e=t.length;if(0!==e){for(var o,n=Number.MAX_VALUE,s=Number.MAX_VALUE,a=Number.MIN_VALUE,d=Number.MIN_VALUE;e--;)o=t[e],o.isPinned?(o.pos.x=o.prevPos.x,o.pos.y=o.prevPos.y):(o.prevPos.x=o.pos.x,o.prevPos.y=o.pos.y),o.pos.x<n&&(n=o.pos.x),o.pos.x>a&&(a=o.pos.x),o.pos.y<s&&(s=o.pos.y),o.pos.y>d&&(d=o.pos.y);r.x1=n,r.x2=a,r.y1=s,r.y2=d}},reset:function(){r.x1=r.y1=0,r.x2=r.y2=0},getBestNewPosition:function(e){var t=r,s=0,a=0;if(e.length){for(var d=0;d<e.length;++d)s+=e[d].pos.x,a+=e[d].pos.y;s/=e.length,a/=e.length}else s=(t.x1+t.x2)/2,a=(t.y1+t.y2)/2;var l=o.springLength;return{x:s+n.next(l)-l/2,y:a+n.next(l)-l/2}}}}},{"ngraph.random":30}],21:[function(e,t){var o=e("ngraph.physics.primitives");t.exports=function(e){return new o.Body(e)}},{"ngraph.physics.primitives":18}],22:[function(e,t){t.exports=function(t){var o=e("ngraph.merge"),n=e("ngraph.expose");t=o(t,{dragCoeff:.02});var r={update:function(e){e.force.x-=t.dragCoeff*e.velocity.x,e.force.y-=t.dragCoeff*e.velocity.y}};return n(t,r,["dragCoeff"]),r}},{"ngraph.expose":10,"ngraph.merge":17}],23:[function(e,t){t.exports=function(e,t){var o,n=0,r=0,s=0,a=0,d=e.length;if(0===d)return 0;for(o=0;o<d;++o){var l=e[o],p=t/l.mass;l.velocity.x+=p*l.force.x,l.velocity.y+=p*l.force.y;var u=l.velocity.x,c=l.velocity.y,g=Math.sqrt(u*u+c*c);1<g&&(l.velocity.x=u/g,l.velocity.y=c/g),n=t*l.velocity.x,s=t*l.velocity.y,l.pos.x+=n,l.pos.y+=s,r+=Math.abs(n),a+=Math.abs(s)}return(r*r+a*a)/d}},{}],24:[function(e,t){t.exports=function(e,t,o,n,r){this.from=e,this.to=t,this.length=o,this.coeff=n,this.weight="number"==typeof r?r:1}},{}],25:[function(e,t){t.exports=function(t){var o=e("ngraph.merge"),n=e("ngraph.random").random(42),r=e("ngraph.expose");t=o(t,{springCoeff:2e-4,springLength:80});var i={update:function(e){var o=e.from,i=e.to,s=0>e.length?t.springLength:e.length,a=i.pos.x-o.pos.x,l=i.pos.y-o.pos.y,p=Math.sqrt(a*a+l*l);0===p&&(a=(n.nextDouble()-.5)/50,l=(n.nextDouble()-.5)/50,p=Math.sqrt(a*a+l*l));var u=p-s,d=(!e.coeff||0>e.coeff?t.springCoeff:e.coeff)*u/p*e.weight;o.force.x+=d*a,o.force.y+=d*l,i.force.x-=d*a,i.force.y-=d*l}};return r(t,i,["springCoeff","springLength"]),i}},{"ngraph.expose":10,"ngraph.merge":17,"ngraph.random":30}],26:[function(e,t){function o(e,t){return 0===t?e.quad0:1===t?e.quad1:2===t?e.quad2:3===t?e.quad3:null}function n(e,t,o){0===t?e.quad0=o:1===t?e.quad1=o:2===t?e.quad2=o:3==t&&(e.quad3=o)}t.exports=function(t){function r(){var e=h[x];return e?(e.quad0=null,e.quad1=null,e.quad2=null,e.quad3=null,e.body=null,e.mass=e.massX=e.massY=0,e.left=e.right=e.top=e.bottom=0):(e=new l,h[x]=e),++x,e}function i(e){var t,o,n,i,s=g,a=0,l=0,p=1,u=0,m=1;for(s[0]=b;p;){var h=s[u],x=h.body;p-=1,u+=1;var y=x!==e;x&&y?(o=x.pos.x-e.pos.x,n=x.pos.y-e.pos.y,i=Math.sqrt(o*o+n*n),0===i&&(o=(d.nextDouble()-.5)/50,n=(d.nextDouble()-.5)/50,i=Math.sqrt(o*o+n*n)),t=c*x.mass*e.mass/(i*i*i),a+=t*o,l+=t*n):y&&(o=h.massX/h.mass-e.pos.x,n=h.massY/h.mass-e.pos.y,i=Math.sqrt(o*o+n*n),0===i&&(o=(d.nextDouble()-.5)/50,n=(d.nextDouble()-.5)/50,i=Math.sqrt(o*o+n*n)),(h.right-h.left)/i<f?(t=c*h.mass*e.mass/(i*i*i),a+=t*o,l+=t*n):(h.quad0&&(s[m]=h.quad0,p+=1,m+=1),h.quad1&&(s[m]=h.quad1,p+=1,m+=1),h.quad2&&(s[m]=h.quad2,p+=1,m+=1),h.quad3&&(s[m]=h.quad3,p+=1,m+=1)))}e.force.x+=a,e.force.y+=l}function s(e){var t,o=Number.MAX_VALUE,n=Number.MAX_VALUE,s=Number.MIN_VALUE,d=Number.MIN_VALUE,l=e.length;for(t=l;t--;){var p=e[t].pos.x,u=e[t].pos.y;p<o&&(o=p),p>s&&(s=p),u<n&&(n=u),u>d&&(d=u)}var c=s-o,g=d-n;for(c>g?d=n+c:s=o+g,x=0,b=r(),b.left=o,b.right=s,b.top=n,b.bottom=d,t=l-1,0<=t&&(b.body=e[t]);t--;)a(e[t],b)}function a(e){for(m.reset(),m.push(b,e);!m.isEmpty();){var t=m.pop(),i=t.node,s=t.body;if(!i.body){var a=s.pos.x,l=s.pos.y;i.mass+=s.mass,i.massX+=s.mass*a,i.massY+=s.mass*l;var p=0,c=i.left,g=(i.right+c)/2,f=i.top,h=(i.bottom+f)/2;a>g&&(++p,c=g,g=i.right),l>h&&(p+=2,f=h,h=i.bottom);var x=o(i,p);x?m.push(x,s):(x=r(),x.left=c,x.top=f,x.right=g,x.bottom=h,x.body=s,n(i,p,x))}else{var y=i.body;if(i.body=null,u(y.pos,s.pos)){var v=3;do{var L=d.nextDouble(),E=(i.right-i.left)*L,k=(i.bottom-i.top)*L;y.pos.x=i.left+E,y.pos.y=i.top+k,v-=1}while(0<v&&u(y.pos,s.pos));if(0==v&&u(y.pos,s.pos))return}m.push(i,y),m.push(i,s)}}}t=t||{},t.gravity="number"==typeof t.gravity?t.gravity:-1,t.theta="number"==typeof t.theta?t.theta:.8;var d=e("ngraph.random").random(1984),l=e("./node"),p=e("./insertStack"),u=e("./isSamePosition"),c=t.gravity,g=[],m=new p,f=t.theta,h=[],x=0,b=r();return{insertBodies:s,getRoot:function(){return b},updateBodyForce:i,options:function(e){return e?("number"==typeof e.gravity&&(c=e.gravity),"number"==typeof e.theta&&(f=e.theta),this):{gravity:c,theta:f}}}}},{"./insertStack":27,"./isSamePosition":28,"./node":29,"ngraph.random":30}],27:[function(e,t){function o(){this.stack=[],this.popIdx=0}function n(e,t){this.node=e,this.body=t}t.exports=o,o.prototype={isEmpty:function(){return 0===this.popIdx},push:function(e,t){var o=this.stack[this.popIdx];o?(o.node=e,o.body=t):this.stack[this.popIdx]=new n(e,t),++this.popIdx},pop:function(){if(0<this.popIdx)return this.stack[--this.popIdx]},reset:function(){this.popIdx=0}}},{}],28:[function(e,t){t.exports=function(e,t){var o=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return 1e-8>o&&1e-8>n}},{}],29:[function(e,t){t.exports=function(){this.body=null,this.quad0=null,this.quad1=null,this.quad2=null,this.quad3=null,this.mass=0,this.massX=0,this.massY=0,this.left=0,this.top=0,this.bottom=0,this.right=0}},{}],30:[function(e,t){function o(e){var t="number"==typeof e?e:+new Date,o=function(){return t=4294967295&t+2127912214+(t<<12),t=4294967295&(3345072700^t^t>>>19),t=4294967295&t+374761393+(t<<5),t=4294967295&(t+3550635116^t<<9),t=4294967295&t+4251993797+(t<<3),t=4294967295&(3042594569^t^t>>>16),(268435455&t)/268435456};return{next:function(e){return Math.floor(o()*e)},nextDouble:function(){return o()}}}t.exports={random:o,randomIterator:function(e,t){var n=t||o();if("function"!=typeof n.next)throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:function(o){var r,s,a;for(r=e.length-1;0<r;--r)s=n.next(r+1),a=e[s],e[s]=e[r],e[r]=a,o(a);e.length&&o(e[0])},shuffle:function(e){var o,r,s;for(o=e.length-1;0<o;--o)r=n.next(o+1),s=e[r],e[r]=e[o],e[o]=s;return e}}}}},{}],31:[function(e,t){t.exports=function(e,t,o){var n={nodes:[],links:[]},r=t||function(e){var t={id:e.id};return void 0!==e.data&&(t.data=e.data),t},i=o||function(e){var t={fromId:e.fromId,toId:e.toId};return void 0!==e.data&&(t.data=e.data),t};return e.forEachNode(function(e){n.nodes.push(r(e))}),e.forEachLink(function(e){n.links.push(i(e))}),JSON.stringify(n)}},{}],32:[function(e,t){function o(e,t){var o=n(e);if(t===void 0)return o;for(var r=Object.keys(t),s=0;s<r.length;++s){var a=r[s],d=t[a];"link"===a?o.link(d):o.attr(a,d)}return o}function n(e){function t(e){return c||(c=r(u)),c.link(e),u}function n(e,t,o){return i.addEventListener(u,e,t,o),u}function s(e,t,o){return i.removeEventListener(u,e,t,o),u}function a(e){var t=o(e);return u.appendChild(t),t}function d(e,t){return 2===arguments.length?(null===t?u.removeAttributeNS(null,e):u.setAttributeNS(null,e,t),u):u.getAttributeNS(null,e)}function l(e){return arguments.length?(u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e),u):u.getAttributeNS("http://www.w3.org/1999/xlink","xlink:href")}function p(e){return void 0===e?u.textContent:(u.textContent=e,u)}var u=e;if("string"==typeof e)u=window.document.createElementNS("http://www.w3.org/2000/svg",e);else if(e.simplesvg)return e;var c;return u.simplesvg=!0,u.attr=d,u.append=a,u.link=l,u.text=p,u.on=n,u.off=s,u.dataSource=t,u}t.exports=o,o.compile=e("./lib/compile");var r=o.compileTemplate=e("./lib/compile_template"),i=e("add-event-listener")},{"./lib/compile":33,"./lib/compile_template":34,"add-event-listener":2}],33:[function(e,t){function o(e){if(e){var t=e.match(/^<\w+/);if(t){var o=t[0].length;return e.substr(0,o)+" xmlns:svg=\"http://www.w3.org/2000/svg\" xmlns=\"http://www.w3.org/2000/svg\" "+e.substr(o)}throw new Error("Cannot parse input text: invalid xml?")}}var n=e("./domparser.js"),r=e("../");t.exports=function(e){try{return e=o(e),r(n.parseFromString(e,"text/xml").documentElement)}catch(t){throw t}}},{"../":32,"./domparser.js":35}],34:[function(e,t){function o(e,t){var s=e.nodeType;if(1===s||3===s){var a;if(e.hasChildNodes()){var d=e.childNodes;for(a=0;a<d.length;++a)o(d[a],t)}if(3===s&&r(e,t),!!e.attributes){var l=e.attributes;for(a=0;a<l.length;++a)n(l[a],e,t)}}}function n(e,t,o){function n(e){t.setAttributeNS(null,a,e[d])}var r=e.value;if(r){var s=r.match(i);if(s){var a=e.localName,d=s[1],l=0>d.indexOf(".");if(!l)throw new Error("simplesvg currently does not support nested bindings");var p=o[d];p?p.push(n):p=o[d]=[n]}}}function r(e,t){function o(t){e.nodeValue=t[s]}var n=e.nodeValue;if(n){var r=n.match(i);if(r){var s=r[1],a=0>s.indexOf("."),d=t[s];d?d.push(o):d=t[s]=[o]}}}t.exports=function(e){var t=Object.create(null);return o(e,t),{link:function(e){function o(t){t(e)}Object.keys(t).forEach(function(e){var n=t[e];n.forEach(o)})}}};var i=/{{(.+?)}}/},{}],35:[function(e,t){function o(){throw new Error("DOMParser is not supported by this platform. Please open issue here https://github.com/anvaka/simplesvg")}t.exports=function(){return"undefined"==typeof DOMParser?{parseFromString:o}:new DOMParser}()},{}],36:[function(e,t){function o(e){var t=a.betweenness(e);return s(t)}function n(e,t){var o=a.degree(e,t);return s(o)}function r(e){var t=a.closeness(e);return s(t)}function i(e){var t=a.eccentricity(e);return s(t)}function s(e){return Object.keys(e).sort(function(t,o){return e[o]-e[t]}).map(function(t){return{key:t,value:e[t]}})}var a=e("ngraph.centrality");t.exports=function(){return{betweennessCentrality:o,degreeCentrality:n,closenessCentrality:r,eccentricityCentrality:i}}},{"ngraph.centrality":4}],37:[function(e,t){t.exports=function(){return{density:function(e,t){var o=e.getNodesCount();return 0===o?NaN:t?e.getLinksCount()/(o*(o-1)):2*e.getLinksCount()/(o*(o-1))}}}},{}],38:[function(e,t){t.exports=function(e,t){var n={};return{bindDragNDrop:function(e,r){var i;if(r){var s=t.getNodeUI(e.id);i=o(s),"function"==typeof r.onStart&&i.onStart(r.onStart),"function"==typeof r.onDrag&&i.onDrag(r.onDrag),"function"==typeof r.onStop&&i.onStop(r.onStop),n[e.id]=i}else(i=n[e.id])&&(i.release(),delete n[e.id])}}};var o=e("./dragndrop.js")},{"./dragndrop.js":39}],39:[function(e,t){t.exports=function(t){var i,s,a,d,l,p,u,c=0,g=0,m=!1,f=0,h=function(t){var o=0,n=0;return t=t||window.event,t.pageX||t.pageY?(o=t.pageX,n=t.pageY):(t.clientX||t.clientY)&&(o=t.clientX+window.document.body.scrollLeft+window.document.documentElement.scrollLeft,n=t.clientY+window.document.body.scrollTop+window.document.documentElement.scrollTop),[o,n]},x=function(t,e,o){s&&s(t,{x:e-c,y:o-g}),c=e,g=o},y=function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},v=function(t){t.preventDefault&&t.preventDefault()},b=function(t){return y(t),!1},L=function(t){t=t||window.event,x(t,t.clientX,t.clientY)},E=function(t){if(t=t||window.event,m)return y(t),!1;var n=1===t.button&&null!==window.event||0===t.button;if(n)return c=t.clientX,g=t.clientY,u=t.target||t.srcElement,i&&i(t,{x:c,y:g}),o.on("mousemove",L),o.on("mouseup",k),y(t),l=window.document.onselectstart,p=window.document.ondragstart,window.document.onselectstart=b,u.ondragstart=b,!1},k=function(t){t=t||window.event,o.off("mousemove",L),o.off("mouseup",k),window.document.onselectstart=l,u.ondragstart=p,u=null,a&&a(t)},I=function(o){if("function"==typeof d){o=o||window.event,o.preventDefault&&o.preventDefault(),o.returnValue=!1;var n,i=h(o),s=r(t),a={x:i[0]-s[0],y:i[1]-s[1]};n=o.wheelDelta?o.wheelDelta/360:o.detail/-9,d(o,n,a)}},w=function(e){!d&&e?"webkit"===n.browser?t.addEventListener("mousewheel",I,!1):t.addEventListener("DOMMouseScroll",I,!1):d&&!e&&("webkit"===n.browser?t.removeEventListener("mousewheel",I,!1):t.removeEventListener("DOMMouseScroll",I,!1)),d=e},N=function(e,t){return(e.clientX-t.clientX)*(e.clientX-t.clientX)+(e.clientY-t.clientY)*(e.clientY-t.clientY)},P=function(t){if(1===t.touches.length){y(t);var e=t.touches[0];x(t,e.clientX,e.clientY)}else if(2===t.touches.length){var o=N(t.touches[0],t.touches[1]),n=0;o<f?n=-1:o>f&&(n=1),d(t,n,{x:t.touches[0].clientX,y:t.touches[0].clientY}),f=o,y(t),v(t)}},_=function(t){m=!1,o.off("touchmove",P),o.off("touchend",_),o.off("touchcancel",_),u=null,a&&a(t)},C=function(t,e){y(t),v(t),c=e.clientX,g=e.clientY,u=t.target||t.srcElement,i&&i(t,{x:c,y:g}),m||(m=!0,o.on("touchmove",P),o.on("touchend",_),o.on("touchcancel",_))},j=function(t){return 1===t.touches.length?C(t,t.touches[0]):void(2===t.touches.length&&(y(t),v(t),f=N(t.touches[0],t.touches[1])))};return t.addEventListener("mousedown",E),t.addEventListener("touchstart",j),{onStart:function(e){return i=e,this},onDrag:function(e){return s=e,this},onStop:function(e){return a=e,this},onScroll:function(e){return w(e),this},release:function(){t.removeEventListener("mousedown",E),t.removeEventListener("touchstart",j),o.off("mousemove",L),o.off("mouseup",k),o.off("touchmove",P),o.off("touchend",_),o.off("touchcancel",_),w(null)}}};var o=e("../Utils/documentEvents.js"),n=e("../Utils/browserInfo.js"),r=e("../Utils/findElementPosition.js")},{"../Utils/browserInfo.js":43,"../Utils/documentEvents.js":44,"../Utils/findElementPosition.js":45}],40:[function(e,t){t.exports=function(e,t){var n=o(t),r=null,i={},s={x:0,y:0};return n.mouseDown(function(t,o){r=t,s.x=o.clientX,s.y=o.clientY,n.mouseCapture(r);var e=i[t.id];return e&&e.onStart&&e.onStart(o,s),!0}).mouseUp(function(e){n.releaseMouseCapture(r),r=null;var t=i[e.id];return t&&t.onStop&&t.onStop(),!0}).mouseMove(function(t,o){if(r){var e=i[r.id];return e&&e.onDrag&&e.onDrag(o,{x:o.clientX-s.x,y:o.clientY-s.y}),s.x=o.clientX,s.y=o.clientY,!0}}),{bindDragNDrop:function(e,t){i[e.id]=t,t||delete i[e.id]}}};var o=e("../WebGL/webglInputEvents.js")},{"../WebGL/webglInputEvents.js":61}],41:[function(e,t){t.exports=function(e,t){function i(e){return u[e]}t=o(t,{maxX:1024,maxY:1024,seed:"Deterministic randomness made me do this"});var s=n(t.seed),a=new r(Number.MAX_VALUE,Number.MAX_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),d={},l=function(){return{x:s.next(t.maxX),y:s.next(t.maxY)}},p=function(e,t){e.x<t.x1&&(t.x1=e.x),e.x>t.x2&&(t.x2=e.x),e.y<t.y1&&(t.y1=e.y),e.y>t.y2&&(t.y2=e.y)},u="function"==typeof Object.create?Object.create(null):{},c=function(e){u[e.id]=l(e),p(u[e.id],a)},g=function(){0===e.getNodesCount()||(a.x1=Number.MAX_VALUE,a.y1=Number.MAX_VALUE,a.x2=Number.MIN_VALUE,a.y2=Number.MIN_VALUE,e.forEachNode(c))},m=function(e){d[e.id]=e},f=function(e){for(var t,o=0;o<e.length;++o)t=e[o],t.node&&("add"===t.changeType?c(t.node):delete u[t.node.id]),t.link&&("add"===t.changeType?m(t.link):delete d[t.link.id])};return e.forEachNode(c),e.forEachLink(m),e.on("changed",f),{run:function(){this.step()},step:function(){return g(),!0},getGraphRect:function(){return a},dispose:function(){e.off("change",f)},isNodePinned:function(){return!0},pinNode:function(){},getNodePosition:i,getLinkPosition:function(e){var t=d[e];return{from:i(t.fromId),to:i(t.toId)}},setNodePosition:function(e,t,o){var n=u[e];n&&(n.x=t,n.y=o)},placeNode:function(e){return"function"==typeof e?(l=e,g(),this):l(e)}}};var o=e("ngraph.merge"),n=e("ngraph.random").random,r=e("../Utils/rect.js")},{"../Utils/rect.js":49,"ngraph.merge":17,"ngraph.random":30}],42:[function(e,t){var o=e("ngraph.events");t.exports=function(e){if(console.log("This method is deprecated. Please use Viva.events() instead"),!e)return e;var t=void 0!==e.on||void 0!==e.off||void 0!==e.fire;return t?{extend:function(){return e},on:e.on,stop:e.off}:{extend:function(){var t=o(e);return t.addEventListener=t.on,t},on:e.on,stop:e.off}}},{"ngraph.events":9}],43:[function(e,t){t.exports=function(){if("undefined"==typeof window||!window.hasOwnProperty("navigator"))return{browser:"",version:"0"};var e=window.navigator.userAgent.toLowerCase(),t=/(webkit)[ \/]([\w.]+)/,o=/(opera)(?:.*version)?[ \/]([\w.]+)/,n=/(msie) ([\w.]+)/,r=/(mozilla)(?:.*? rv:([\w.]+))?/,i=t.exec(e)||o.exec(e)||n.exec(e)||0>e.indexOf("compatible")&&r.exec(e)||[];return{browser:i[1]||"",version:i[2]||"0"}}()},{}],44:[function(e,t){function o(e,t){document.addEventListener(e,t)}function n(e,t){document.removeEventListener(e,t)}var r=e("./nullEvents.js");t.exports=function(){return void 0===typeof document?r:{on:o,off:n}}()},{"./nullEvents.js":48}],45:[function(e,t){t.exports=function(e){var t=0,o=0;if(e.offsetParent)do t+=e.offsetLeft,o+=e.offsetTop;while(null!==(e=e.offsetParent));return[t,o]}},{}],46:[function(e,t){t.exports=function(e){if(!e)throw{message:"Cannot get dimensions of undefined container"};var t=e.clientWidth,o=e.clientHeight;return{left:0,top:0,width:t,height:o}}},{}],47:[function(e,t){var o=e("gintersect");t.exports=function(e,t,n,r,i,s,a,d){return o(e,t,e,r,i,s,a,d)||o(e,r,n,r,i,s,a,d)||o(n,r,n,t,i,s,a,d)||o(n,t,e,t,i,s,a,d)}},{gintersect:3}],48:[function(e,t){function o(){}t.exports=function(){return{on:o,off:o,stop:o}}()},{}],49:[function(e,t){t.exports=function(e,t,o,n){this.x1=e||0,this.y1=t||0,this.x2=o||0,this.y2=n||0}},{}],50:[function(e,t){(function(e){function o(){}t.exports=function(){function t(e){var t=new Date().getTime(),o=Math.max(0,16-(t-a)),n=s.setTimeout(function(){e(t+o)},o);return a=t+o,n}function n(e){s.clearTimeout(e)}var r,s,a=0,d=["ms","moz","webkit","o"];for(s="undefined"==typeof window?"undefined"==typeof e?{setTimeout:o,clearTimeout:o}:e:window,r=0;r<d.length&&!s.requestAnimationFrame;++r){var l=d[r];s.requestAnimationFrame=s[l+"RequestAnimationFrame"],s.cancelAnimationFrame=s[l+"CancelAnimationFrame"]||s[l+"CancelRequestAnimationFrame"]}return s.requestAnimationFrame||(s.requestAnimationFrame=t),s.cancelAnimationFrame||(s.cancelAnimationFrame=n),function(e){function t(){r=s.requestAnimationFrame(t),e()||o()}function o(){s.cancelAnimationFrame(r),r=0}function n(){r||t()}var r;return t(),{stop:o,restart:n}}}()}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],51:[function(e,t){function o(e,t){window.addEventListener(e,t)}function n(e,t){window.removeEventListener(e,t)}var r=e("./nullEvents.js");t.exports=function(){return"undefined"==typeof window?r:{on:o,off:n}}()},{"./nullEvents.js":48}],52:[function(e,t){t.exports=function(e,t){function p(e){if("string"==typeof q)return 0<=q.indexOf(e);return"boolean"!=typeof q||q}function u(){z=z||window.document.body,M=M||n(e,{springLength:80,springCoeff:2e-4}),G=G||r(e,{container:z}),t.hasOwnProperty("renderLinks")||(t.renderLinks=!0),t.prerender=t.prerender||0,R=(G.inputManager||s)(e,G)}function c(){G.beginRender(),t.renderLinks&&G.renderLinks(),G.renderNodes(),G.endRender()}function g(){return X=M.step()&&!O,c(),!X}function m(e){U||(e===void 0?U=a(g,30):U=a(function(){if(e-=1,0>e){return!1}return g()},30))}function f(){V||(X=!1,U.restart())}function h(){if("number"==typeof t.prerender&&0<t.prerender)for(var e=0;e<t.prerender;e+=1)M.step()}function x(){var e=M.getGraphRect(),t=d(z),o=(e.x2+e.x1)/2,n=(e.y2+e.y1)/2;W.offsetX=t.width/2-(o*W.scale-o),W.offsetY=t.height/2-(n*W.scale-n),G.graphCenterChanged(W.offsetX,W.offsetY),Y=!1}function y(e){var t=M.getNodePosition(e.id);G.addNode(e,t)}function v(e){G.releaseNode(e)}function b(e){var t=M.getLinkPosition(e.id);G.addLink(e,t)}function L(e){G.releaseLink(e)}function E(t){if(p("node")){var o=!1;R.bindDragNDrop(t,{onStart:function(){o=M.isNodePinned(t),M.pinNode(t,!0),O=!0,f()},onDrag:function(o,e){var n=M.getNodePosition(t.id);M.setNodePosition(t.id,n.x+e.x/W.scale,n.y+e.y/W.scale),O=!0,c()},onStop:function(){M.pinNode(t,o),O=!1}})}}function k(e){R.bindDragNDrop(e,null)}function I(){G.init(z),e.forEachNode(y),t.renderLinks&&e.forEachLink(b)}function w(){G.release(z)}function N(t){var o=t.node;"add"===t.changeType?(y(o),E(o),Y&&x()):"remove"===t.changeType?(k(o),v(o),0===e.getNodesCount()&&(Y=!0)):"update"===t.changeType&&(k(o),v(o),y(o),E(o))}function P(e){var o=e.link;if("add"===e.changeType)t.renderLinks&&b(o);else if("remove"===e.changeType)t.renderLinks&&L(o);else if("update"===e.changeType)throw"Update type is not implemented. TODO: Implement me!"}function _(e){var t,o;for(t=0;t<e.length;t+=1)o=e[t],o.node?N(o):o.link&&P(o);f()}function C(){x(),g()}function j(){B&&(B.release(),B=null)}function T(){e.off("changed",_)}function A(e,t){if(!t){var o=d(z);t={x:o.width/2,y:o.height/2}}var n=Math.pow(1+.4,e?-.2:.2);return W.scale=G.scale(n,t),c(),H.fire("scale",W.scale),W.scale}function S(){i.on("resize",C),j(),p("drag")&&(B=l(z),B.onDrag(function(t,e){G.translateRel(e.x,e.y),c(),H.fire("drag",e)})),p("scroll")&&(!B&&(B=l(z)),B.onScroll(function(t,e,o){A(0>e,o)})),e.forEachNode(E),T(),e.on("changed",_)}function D(){F=!1,T(),j(),i.off("resize",C),H.off(),U.stop(),e.forEachLink(function(e){t.renderLinks&&L(e)}),e.forEachNode(function(e){k(e),v(e)}),M.dispose(),w()}t=t||{};var R,U,B,M=t.layout,G=t.graphics,z=t.container,q=!(t.interactive!==void 0)||t.interactive,F=!1,Y=!0,X=!1,O=!1,V=!1,W={offsetX:0,offsetY:0,scale:1},H=o({});return{run:function(e){return F||(u(),h(),I(),x(),S(),F=!0),m(e),this},reset:function(){G.resetScale(),x(),W.scale=1},pause:function(){V=!0,U.stop()},resume:function(){V=!1,U.restart()},rerender:function(){return c(),this},zoomOut:function(){return A(!0)},zoomIn:function(){return A(!1)},getTransform:function(){return W},moveTo:function(e,t){G.graphCenterChanged(W.offsetX-e*W.scale,W.offsetY-t*W.scale),c()},getGraphics:function(){return G},getLayout:function(){return M},dispose:function(){D()},on:function(e,t){return H.on(e,t),this},off:function(e,t){return H.off(e,t),this}}};var o=e("ngraph.events"),n=e("ngraph.forcelayout"),r=e("./svgGraphics.js"),i=e("../Utils/windowEvents.js"),s=e("../Input/domInputManager.js"),a=e("../Utils/timer.js"),d=e("../Utils/getDimensions.js"),l=e("../Input/dragndrop.js")},{"../Input/domInputManager.js":38,"../Input/dragndrop.js":39,"../Utils/getDimensions.js":46,"../Utils/timer.js":50,"../Utils/windowEvents.js":51,"./svgGraphics.js":53,"ngraph.events":9,"ngraph.forcelayout":11}],53:[function(e,t){t.exports=function(){function e(){var e=o("svg");return i=o("g").attr("buffered-rendering","dynamic"),e.appendChild(i),e}var i,s,a,d=0,l=0,u=1,c={},g={},m=function(){return o("rect").attr("width",10).attr("height",10).attr("fill","#00a2e8")},f=function(e,t){e.attr("x",t.x-5).attr("y",t.y-5)},h=function(){return o("line").attr("stroke","#999")},x=function(e,t,o){e.attr("x1",t.x).attr("y1",t.y).attr("x2",o.x).attr("y2",o.y)},y=function(e){e.fire("rescaled")},v={x:0,y:0},b={x:0,y:0},L={x:0,y:0},E=function(){if(i){var e="matrix("+u+", 0, 0,"+u+","+d+","+l+")";i.attr("transform",e)}};s=e();var k={getNodeUI:function(e){return c[e]},getLinkUI:function(e){return g[e]},node:function(e){if("function"==typeof e)return m=e,this},link:function(e){if("function"==typeof e)return h=e,this},placeNode:function(e){return f=e,this},placeLink:function(e){return x=e,this},beginRender:function(){},endRender:function(){},graphCenterChanged:function(e,t){d=e,l=t,E()},inputManager:r,translateRel:function(e,o){var n=s.createSVGPoint(),r=i.getCTM(),t=s.createSVGPoint().matrixTransform(r.inverse());n.x=e,n.y=o,n=n.matrixTransform(r.inverse()),n.x=(n.x-t.x)*r.a,n.y=(n.y-t.y)*r.d,r.e+=n.x,r.f+=n.y;var a="matrix("+r.a+", 0, 0,"+r.d+","+r.e+","+r.f+")";i.attr("transform",a)},scale:function(e,o){var n=s.createSVGPoint();n.x=o.x,n.y=o.y,n=n.matrixTransform(i.getCTM().inverse());var r=s.createSVGMatrix().translate(n.x,n.y).scale(e).translate(-n.x,-n.y),a=i.getCTM().multiply(r);u=a.a,d=a.e,l=a.f;var t="matrix("+a.a+", 0, 0,"+a.d+","+a.e+","+a.f+")";return i.attr("transform",t),y(this),u},resetScale:function(){u=1;return i.attr("transform","matrix(1, 0, 0, 1, 0, 0)"),y(this),this},init:function(e){e.appendChild(s),E(),"function"==typeof a&&a(s)},release:function(e){s&&e&&e.removeChild(s)},addLink:function(e,t){var o=h(e);if(o)return o.position=t,o.link=e,g[e.id]=o,0<i.childElementCount?i.insertBefore(o,i.firstChild):i.appendChild(o),o},releaseLink:function(e){var t=g[e.id];t&&(i.removeChild(t),delete g[e.id])},addNode:function(e,t){var o=m(e);if(o)return o.position=t,o.node=e,c[e.id]=o,i.appendChild(o),o},releaseNode:function(e){var t=c[e.id];t&&(i.removeChild(t),delete c[e.id])},renderNodes:function(){for(var e in c)if(c.hasOwnProperty(e)){var t=c[e];v.x=t.position.x,v.y=t.position.y,f(t,v,t.node)}},renderLinks:function(){for(var e in g)if(g.hasOwnProperty(e)){var t=g[e];b.x=t.position.from.x,b.y=t.position.from.y,L.x=t.position.to.x,L.y=t.position.to.y,x(t,b,L,t.link)}},getGraphicsRoot:function(e){return"function"==typeof e&&(s?e(s):a=e),s},getSvgRoot:function(){return s}};return n(k),k};var o=e("simplesvg"),n=e("ngraph.events"),r=e("../Input/domInputManager.js")},{"../Input/domInputManager.js":38,"ngraph.events":9,simplesvg:32}],54:[function(e,t){t.exports=function(e){e=d(e,{enableBlending:!0,preserveDrawingBuffer:!1,clearColor:!1,clearColorValue:{r:1,g:1,b:1,a:1}});var t,l,p,u,g,m,f,h,x=0,y=0,v=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],b=[],L=[],E={},k={},I=n(),w=r(),N=function(){return i()},P=function(){return s(3014898687)},_=function(){I.updateTransform(v),w.updateTransform(v)},C=function(){v=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},j=function(){t&&l&&(u=l.width=Math.max(t.offsetWidth,1),g=l.height=Math.max(t.offsetHeight,1),p&&p.viewport(0,0,u,g),I&&I.updateSize(u/2,g/2),w&&w.updateSize(u/2,g/2))},T=function(e){e.fire("rescaled")};l=window.document.createElement("canvas");var A={getLinkUI:function(e){return k[e]},getNodeUI:function(e){return E[e]},node:function(e){if("function"==typeof e)return N=e,this},link:function(e){if("function"==typeof e)return P=e,this},placeNode:function(e){return m=e,this},placeLink:function(e){return f=e,this},inputManager:o,beginRender:function(){},endRender:function(){0<y&&I.render(),0<x&&w.render()},bringLinkToFront:function(e){var t,o,n=I.getFrontLinkId();I.bringToFront(e),n>e.id&&(t=e.id,o=L[n],L[n]=L[t],L[n].id=n,L[t]=o,L[t].id=t)},graphCenterChanged:function(e,t){v[12]=2*e/u-1,v[13]=1-2*t/g,_()},addLink:function(e,t){var o=y++,n=P(e);return n.id=o,n.pos=t,I.createLink(n),L[o]=n,k[e.id]=n,n},addNode:function(e,t){var o=x++,n=N(e);return n.id=o,n.position=t,n.node=e,w.createNode(n),b[o]=n,E[e.id]=n,n},translateRel:function(e,t){v[12]+=2*v[0]*e/u/v[0],v[13]-=2*v[5]*t/g/v[5],_()},scale:function(e,t){var o=2*t.x/u-1,n=1-2*t.y/g;return o-=v[12],n-=v[13],v[12]+=o*(1-e),v[13]+=n*(1-e),v[0]*=e,v[5]*=e,_(),T(this),v[0]},resetScale:function(){return C(),p&&(j(),_()),this},updateSize:j,init:function(o){var n={};if(e.preserveDrawingBuffer&&(n.preserveDrawingBuffer=!0),t=o,j(),C(),t.appendChild(l),p=l.getContext("experimental-webgl",n),!p){throw window.alert("Could not initialize WebGL. Seems like the browser doesn't support it."),"Could not initialize WebGL. Seems like the browser doesn't support it."}if(e.enableBlending&&(p.blendFunc(p.SRC_ALPHA,p.ONE_MINUS_SRC_ALPHA),p.enable(p.BLEND)),e.clearColor){var r=e.clearColorValue;p.clearColor(r.r,r.g,r.b,r.a),this.beginRender=function(){p.clear(p.COLOR_BUFFER_BIT)}}I.load(p),I.updateSize(u/2,g/2),w.load(p),w.updateSize(u/2,g/2),_(),"function"==typeof h&&h(l)},release:function(e){l&&e&&e.removeChild(l)},isSupported:function(){var e=window.document.createElement("canvas"),t=e&&e.getContext&&e.getContext("experimental-webgl");return t},releaseLink:function(e){0<y&&(y-=1);var t=k[e.id];delete k[e.id],I.removeLink(t);var o=t.id;if(o<y){if(0==y||y===o)return;var n=L[y];L[o]=n,n.id=o}},releaseNode:function(e){0<x&&(x-=1);var t=E[e.id];delete E[e.id],w.removeNode(t);var o=t.id;if(o<x){if(0==x||x===o)return;var n=b[x];b[o]=n,n.id=o,w.replaceProperties(t,n)}},renderNodes:function(){for(var e,t={x:0,y:0},o=0;o<x;++o)e=b[o],t.x=e.position.x,t.y=e.position.y,m&&m(e,t),w.position(e,t)},renderLinks:function(){if(!this.omitLinksRendering)for(var e={x:0,y:0},t={x:0,y:0},o=0;o<y;++o){var n=L[o],r=n.pos.from;t.x=r.x,t.y=-r.y,r=n.pos.to,e.x=r.x,e.y=-r.y,f&&f(n,t,e),I.position(n,t,e)}},getGraphicsRoot:function(e){return"function"==typeof e&&(l?e(l):h=e),l},setNodeProgram:function(e){if(!p&&e)w=e;else if(e)throw"Not implemented. Cannot swap shader on the fly... Yet."},setLinkProgram:function(e){if(!p&&e)I=e;else if(e)throw"Not implemented. Cannot swap shader on the fly... Yet."},transformClientToGraphCoordinates:function(e){return e.x=2*e.x/u-1,e.y=1-2*e.y/g,e.x=(e.x-v[12])/v[0],e.y=(e.y-v[13])/v[5],e.x*=u/2,e.y*=-g/2,e},transformGraphToClientCoordinates:function(e){return e.x/=u/2,e.y/=-g/2,e.x=e.x*v[0]+v[12],e.y=e.y*v[5]+v[13],e.x=(e.x+1)*u/2,e.y=(1-e.y)*g/2,e},getNodeAtClientPos:function(e,t){if("function"!=typeof t)return null;this.transformClientToGraphCoordinates(e);for(var o=0;o<x;++o)if(t(b[o],e.x,e.y))return b[o].node;return null}};return a(A),A};var o=e("../Input/webglInputManager.js"),n=e("../WebGL/webglLinkProgram.js"),r=e("../WebGL/webglNodeProgram.js"),i=e("../WebGL/webglSquare.js"),s=e("../WebGL/webglLine.js"),a=e("ngraph.events"),d=e("ngraph.merge")},{"../Input/webglInputManager.js":40,"../WebGL/webglLine.js":62,"../WebGL/webglLinkProgram.js":63,"../WebGL/webglNodeProgram.js":64,"../WebGL/webglSquare.js":65,"ngraph.events":9,"ngraph.merge":17}],3:[function(e,t){var o=e("ngraph.random").randomIterator,n=e("ngraph.random").random;t.exports=function(e,t){function r(){g=0,u.forEach(a),c=g/h.length}function i(){return c}function s(e){return f.get(e)}function a(e){var t=d(e),o=f.get(e);t!==o&&(f.set(e,t),g+=1)}function d(t){function o(e,o){if(l(o.toId===t)){var s=f.get(e.id),a=n.get(s)||0;a+=1,a>r&&(r=a,i=s),n.set(s,a)}}var n=new Map,r=0,i=-1;return e.forEachLinkedNode(t,o),-1===i?f.get(t):i}function l(e){return"in"===t?e:"out"!==t||!e}function p(){for(var e=new Map,t=0;t<h.length;++t){var o=h[t],n=s(o),r=e.get(n);r?r.push(o):e.set(n,[o])}return e}var u,c=1,g=0,m=n(42),f=new Map,h=[];return function(){e.forEachNode(function(e){f.set(e.id,h.length),h.push(e.id)}),u=o(h,m)}(),{step:r,getClass:s,getChangeRate:i,forEachCluster:function(e){var t=p();t.forEach(function(t,o){e({class:o,nodes:t})})},createClusterMap:p}}},{"ngraph.random":28}],55:[function(e,t){t.exports=function(e){var t=10414335;if(!("string"==typeof e&&e))"number"==typeof e&&(t=e);else if(4===e.length&&(e=e.replace(/([^#])/g,"$1$1")),9===e.length)t=parseInt(e.substr(1),16);else if(7===e.length)t=255|parseInt(e.substr(1),16)<<8;else throw"Color expected in hex format with preceding \"#\". E.g. #00ff00. Got value: "+e;return t}},{}],56:[function(e,t){t.exports=function(e){this.canvas=window.document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.isDirty=!1,this.canvas.width=this.canvas.height=e}},{}],57:[function(e,t){function o(e,t,o,n){for(var r=0;r<n;++r)e[t+r]=e[o+r]}function n(e,t,o,n){for(var r,s=0;s<n;++s)r=e[t+s],e[t+s]=e[o+s],e[o+s]=r}t.exports=function(e){function t(t,o){var n=e.createShader(o);if(e.shaderSource(n,t),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS)){var r=e.getShaderInfoLog(n);throw window.alert(r),r}return n}return{createProgram:function(o,n){var r=e.createProgram(),i=t(o,e.VERTEX_SHADER),s=t(n,e.FRAGMENT_SHADER);if(e.attachShader(r,i),e.attachShader(r,s),e.linkProgram(r),!e.getProgramParameter(r,e.LINK_STATUS)){var a=e.getShaderInfoLog(r);throw window.alert(a),a}return r},extendArray:function(e,t,o){if((t+1)*o>e.length){var n=new Float32Array(2*(e.length*o));return n.set(e),n}return e},copyArrayPart:o,swapArrayPart:n,getLocations:function(t,o){for(var n={},r=0;r<o.length;++r){var s=o[r],a=-1;if("a"===s[0]&&"_"===s[1]){if(a=e.getAttribLocation(t,s),-1===a)throw new Error("Program doesn't have required attribute: "+s);n[s.slice(2)]=a}else if("u"===s[0]&&"_"===s[1]){if(a=e.getUniformLocation(t,s),null===a)throw new Error("Program doesn't have required uniform: "+s);n[s.slice(2)]=a}else throw new Error("Couldn't figure out your intent. All uniforms should start with 'u_' prefix, and attributes with 'a_'")}return n},context:e}}},{}],58:[function(e,t){function o(e){return 0==(e&e-1)}var n=e("./texture.js");t.exports=function(e){function t(e){var t=f[e];if(!t)return!1;if(delete f[e],m-=1,m===t.offset)return!0;var o=a(t.offset),n=a(m);p(n,o);var r=f[b[m]];return r.offset=t.offset,b[t.offset]=b[m],l(),!0}function r(e,t){if(f.hasOwnProperty(e))t(f[e]);else{var o=new window.Image,n=m;m+=1,o.crossOrigin="anonymous",o.onload=function(){l(),s(n,o,t)},o.src=e}}function i(){var e=new n(c*g);v.push(e)}function s(e,t,o){var n=a(e),r={offset:e};n.textureNumber>=v.length&&i();var s=v[n.textureNumber];s.ctx.drawImage(t,n.col*g,n.row*g,g,g),b[e]=t.src,f[t.src]=r,s.isDirty=!0,o(r)}function a(t){var o=t%e;return{textureNumber:t/e<<0,row:o/c<<0,col:o%c}}function d(){L.isDirty=!0,h=0,u=null}function l(){u&&(window.clearTimeout(u),h+=1,u=null),10<h?d():u=window.setTimeout(d,400)}function p(e,t){var o=v[e.textureNumber].canvas,n=v[t.textureNumber].ctx,r=t.col*g,i=t.row*g;n.drawImage(o,e.col*g,e.row*g,g,g,r,i,g,g),v[e.textureNumber].isDirty=!0,v[t.textureNumber].isDirty=!0}var u,c=Math.sqrt(e||1024)<<0,g=c,m=1,f={},h=0,v=[],b=[];if(!o(e))throw"Tiles per texture should be power of two.";var L={isDirty:!1,clearDirty:function(){var e;for(L.isDirty=!1,e=0;e<v.length;++e)v[e].isDirty=!1},remove:t,getTextures:function(){return v},getCoordinates:function(e){return f[e]},load:r};return L}},{"./texture.js":56}],59:[function(e,t){t.exports=function(e,t){return{_texture:0,_offset:0,size:"number"==typeof e?e:32,src:t}}},{}],60:[function(e,t){function o(){return"precision mediump float;\nvarying vec4 color;\nvarying vec3 vTextureCoord;\nuniform sampler2D u_sampler0;\nuniform sampler2D u_sampler1;\nuniform sampler2D u_sampler2;\nuniform sampler2D u_sampler3;\nvoid main(void) {\n   if (vTextureCoord.z == 0.) {\n     gl_FragColor = texture2D(u_sampler0, vTextureCoord.xy);\n   } else if (vTextureCoord.z == 1.) {\n     gl_FragColor = texture2D(u_sampler1, vTextureCoord.xy);\n   } else if (vTextureCoord.z == 2.) {\n     gl_FragColor = texture2D(u_sampler2, vTextureCoord.xy);\n   } else if (vTextureCoord.z == 3.) {\n     gl_FragColor = texture2D(u_sampler3, vTextureCoord.xy);\n   } else { gl_FragColor = vec4(0, 1, 0, 1); }\n}"}function n(){return"attribute vec2 a_vertexPos;\nattribute float a_customAttributes;\nuniform vec2 u_screenSize;\nuniform mat4 u_transform;\nuniform float u_tilesPerTexture;\nvarying vec3 vTextureCoord;\nvoid main(void) {\n   gl_Position = u_transform * vec4(a_vertexPos/u_screenSize, 0, 1);\nfloat corner = mod(a_customAttributes, 4.);\nfloat tileIndex = mod(floor(a_customAttributes / 4.), u_tilesPerTexture);\nfloat tilesPerRow = sqrt(u_tilesPerTexture);\nfloat tileSize = 1./tilesPerRow;\nfloat tileColumn = mod(tileIndex, tilesPerRow);\nfloat tileRow = floor(tileIndex/tilesPerRow);\nif(corner == 0.0) {\n  vTextureCoord.xy = vec2(0, 1);\n} else if(corner == 1.0) {\n  vTextureCoord.xy = vec2(1, 1);\n} else if(corner == 2.0) {\n  vTextureCoord.xy = vec2(0, 0);\n} else {\n  vTextureCoord.xy = vec2(1, 0);\n}\nvTextureCoord *= tileSize;\nvTextureCoord.x += tileColumn * tileSize;\nvTextureCoord.y += tileRow * tileSize;\nvTextureCoord.z = floor(floor(a_customAttributes / 4.)/u_tilesPerTexture);\n}"}var r=e("./webglAtlas.js"),i=e("./webgl.js");t.exports=function(){function e(e,t){e.nativeObject&&g.deleteTexture(e.nativeObject);var o=g.createTexture();g.activeTexture(g["TEXTURE"+t]),g.bindTexture(g.TEXTURE_2D,o),g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,e.canvas),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR_MIPMAP_NEAREST),g.generateMipmap(g.TEXTURE_2D),g.uniform1i(h["sampler"+t],t),e.nativeObject=o}function t(){if(u.isDirty){var t,o=u.getTextures();for(t=0;t<o.length;++t)(o[t].isDirty||!o[t].nativeObject)&&e(o[t],t);u.clearDirty()}}function s(e){g=e,f=i(e),u=new r(1024),c=f.createProgram(E,L),g.useProgram(c),h=f.getLocations(c,["a_vertexPos","a_customAttributes","u_screenSize","u_transform","u_sampler0","u_sampler1","u_sampler2","u_sampler3","u_tilesPerTexture"]),g.uniform1f(h.tilesPerTexture,1024),g.enableVertexAttribArray(h.vertexPos),g.enableVertexAttribArray(h.customAttributes),m=g.createBuffer()}function a(e,t){var o=e.id*18;I[o]=t.x-e.size,I[o+1]=t.y-e.size,I[o+2]=4*e._offset,I[o+3]=t.x+e.size,I[o+4]=t.y-e.size,I[o+5]=4*e._offset+1,I[o+6]=t.x-e.size,I[o+7]=t.y+e.size,I[o+8]=4*e._offset+2,I[o+9]=t.x-e.size,I[o+10]=t.y+e.size,I[o+11]=4*e._offset+2,I[o+12]=t.x+e.size,I[o+13]=t.y-e.size,I[o+14]=4*e._offset+1,I[o+15]=t.x+e.size,I[o+16]=t.y+e.size,I[o+17]=4*e._offset+3}function d(e){I=f.extendArray(I,k,18),k+=1;var t=u.getCoordinates(e.src);t?e._offset=t.offset:(e._offset=0,u.load(e.src,function(t){e._offset=t.offset}))}function l(e){0<k&&(k-=1),e.id<k&&0<k&&(e.src&&u.remove(e.src),f.copyArrayPart(I,e.id*18,k*18,18))}function p(){g.useProgram(c),g.bindBuffer(g.ARRAY_BUFFER,m),g.bufferData(g.ARRAY_BUFFER,I,g.DYNAMIC_DRAW),b&&(b=!1,g.uniformMatrix4fv(h.transform,!1,v),g.uniform2f(h.screenSize,x,y)),g.vertexAttribPointer(h.vertexPos,2,g.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,0),g.vertexAttribPointer(h.customAttributes,1,g.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,8),t(),g.drawArrays(g.TRIANGLES,0,6*k)}var u,c,g,m,f,h,x,y,v,b,L=o(),E=n(),k=0,I=new Float32Array(64);return{load:s,position:a,createNode:d,removeNode:l,replaceProperties:function(e,t){t._offset=e._offset},updateTransform:function(e){b=!0,v=e},updateSize:function(e,t){x=e,y=t,b=!0},render:p}}},{"./webgl.js":57,"./webglAtlas.js":58}],61:[function(e,t){var o=e("../Utils/documentEvents.js");t.exports=function(e){function t(e,t,o){if(e&&e.size){var n=e.position,r=e.size;return n.x-r<t&&t<n.x+r&&n.y-r<o&&o<n.y+r}return!0}function n(o){return e.getNodeAtClientPos(o,t)}function r(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function i(t){return r(t),!1}function s(e,t){var o,n;for(o=0;o<e.length;o+=1)if(n=e[o].apply(void 0,t),n)return!0}if(e.webglInputEvents)return e.webglInputEvents;var a,d,l=null,p=[],u=[],c=[],g=[],m=[],f=[],h=[],x=e.getGraphicsRoot();(function(e){var t={x:0,y:0},x=null,y=1,v=+new Date,b=function(o){s(m,[x,o]),t.x=o.clientX,t.y=o.clientY},L=function(){o.off("mousemove",b),o.off("mouseup",L)},E=function(){d=e.getBoundingClientRect()};window.addEventListener("resize",E),E(),e.addEventListener("mousemove",function(o){if(!l){0==y++%7&&(E(),y=1);var e,i=!1;t.x=o.clientX-d.left,t.y=o.clientY-d.top,e=n(t),e&&x!==e?(x=e,i=i||s(p,[x])):null===e&&x!==e&&(i=i||s(u,[x]),x=null),i&&r(o)}}),e.addEventListener("mousedown",function(l){var e,p=!1;E(),t.x=l.clientX-d.left,t.y=l.clientY-d.top,e=[n(t),l],e[0]?(p=s(c,e),o.on("mousemove",b),o.on("mouseup",L),a=window.document.onselectstart,window.document.onselectstart=i,x=e[0]):x=null,p&&r(l)}),e.addEventListener("mouseup",function(o){var e,i=+new Date;t.x=o.clientX-d.left,t.y=o.clientY-d.top;var l=n(t),p=l===x;e=[l||x,o],e[0]&&(window.document.onselectstart=a,400>i-v&&p?s(h,e):s(f,e),v=i,s(g,e)&&r(o))})})(x);var y={mouseEnter:function(e){return"function"==typeof e&&p.push(e),y},mouseLeave:function(e){return"function"==typeof e&&u.push(e),y},mouseDown:function(e){return"function"==typeof e&&c.push(e),y},mouseUp:function(e){return"function"==typeof e&&g.push(e),y},mouseMove:function(e){return"function"==typeof e&&m.push(e),y},click:function(e){return"function"==typeof e&&f.push(e),y},dblClick:function(e){return"function"==typeof e&&h.push(e),y},mouseCapture:function(e){l=e},releaseMouseCapture:function(){l=null}};return e.webglInputEvents=y,y}},{"../Utils/documentEvents.js":44}],62:[function(e,t){var o=e("./parseColor.js");t.exports=function(e){return{color:o(e)}}},{"./parseColor.js":55}],63:[function(e,t){var o=e("./webgl.js");t.exports=function(){var e,t,n,r,i,s,a,d,l,p,u=2*(2*Float32Array.BYTES_PER_ELEMENT+Uint32Array.BYTES_PER_ELEMENT),c=0,g=new ArrayBuffer(16*u),m=new Float32Array(g),f=new Uint32Array(g),h=function(){if((c+1)*u>g.byteLength){var e=new ArrayBuffer(2*g.byteLength),t=new Float32Array(e),o=new Uint32Array(e);o.set(f),m=t,f=o,g=e}};return{load:function(s){t=s,r=o(s),e=r.createProgram("attribute vec2 a_vertexPos;\nattribute vec4 a_color;\nuniform vec2 u_screenSize;\nuniform mat4 u_transform;\nvarying vec4 color;\nvoid main(void) {\n   gl_Position = u_transform * vec4(a_vertexPos/u_screenSize, 0.0, 1.0);\n   color = a_color.abgr;\n}","precision mediump float;\nvarying vec4 color;\nvoid main(void) {\n   gl_FragColor = color;\n}"),t.useProgram(e),i=r.getLocations(e,["a_vertexPos","a_color","u_screenSize","u_transform"]),t.enableVertexAttribArray(i.vertexPos),t.enableVertexAttribArray(i.color),n=t.createBuffer()},position:function(e,t,o){var n=e.id,r=n*6;m[r]=t.x,m[r+1]=t.y,f[r+2]=e.color,m[r+3]=o.x,m[r+4]=o.y,f[r+5]=e.color},createLink:function(e){h(),c+=1,s=e.id},removeLink:function(e){0<c&&(c-=1),e.id<c&&0<c&&r.copyArrayPart(f,e.id*6,c*6,6)},updateTransform:function(e){p=!0,l=e},updateSize:function(e,t){a=e,d=t,p=!0},render:function(){t.useProgram(e),t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,g,t.DYNAMIC_DRAW),p&&(p=!1,t.uniformMatrix4fv(i.transform,!1,l),t.uniform2f(i.screenSize,a,d)),t.vertexAttribPointer(i.vertexPos,2,t.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(i.color,4,t.UNSIGNED_BYTE,!0,3*Float32Array.BYTES_PER_ELEMENT,8),t.drawArrays(t.LINES,0,2*c),s=c-1},bringToFront:function(e){s>e.id&&r.swapArrayPart(m,e.id*6,s*6,6),0<s&&(s-=1)},getFrontLinkId:function(){return s}}}},{"./webgl.js":57}],64:[function(e,t){var o=e("./webgl.js");t.exports=function(){function e(){if((L+1)*f>=y.byteLength){var e=new ArrayBuffer(2*y.byteLength),t=new Float32Array(e),o=new Uint32Array(e);o.set(b),v=t,b=o,y=e}}function t(e){a=e,p=o(e),s=p.createProgram(x,h),a.useProgram(s),l=p.getLocations(s,["a_vertexPos","a_color","u_screenSize","u_transform"]),a.enableVertexAttribArray(l.vertexPos),a.enableVertexAttribArray(l.color),d=a.createBuffer()}function n(e,t){var o=e.id;v[o*4]=t.x,v[o*4+1]=-t.y,v[o*4+2]=e.size,b[o*4+3]=e.color}function r(e){0<L&&(L-=1),e.id<L&&0<L&&p.copyArrayPart(b,e.id*4,L*4,4)}function i(){a.useProgram(s),a.bindBuffer(a.ARRAY_BUFFER,d),a.bufferData(a.ARRAY_BUFFER,y,a.DYNAMIC_DRAW),m&&(m=!1,a.uniformMatrix4fv(l.transform,!1,g),a.uniform2f(l.screenSize,u,c)),a.vertexAttribPointer(l.vertexPos,3,a.FLOAT,!1,4*Float32Array.BYTES_PER_ELEMENT,0),a.vertexAttribPointer(l.color,4,a.UNSIGNED_BYTE,!0,4*Float32Array.BYTES_PER_ELEMENT,12),a.drawArrays(a.POINTS,0,L)}var s,a,d,l,p,u,c,g,m,f=3*Float32Array.BYTES_PER_ELEMENT+Uint32Array.BYTES_PER_ELEMENT,h="precision mediump float;\nvarying vec4 color;\nvoid main(void) {\n   gl_FragColor = color;\n}",x="attribute vec3 a_vertexPos;\nattribute vec4 a_color;\nuniform vec2 u_screenSize;\nuniform mat4 u_transform;\nvarying vec4 color;\nvoid main(void) {\n   gl_Position = u_transform * vec4(a_vertexPos.xy/u_screenSize, 0, 1);\n   gl_PointSize = a_vertexPos.z * u_transform[0][0];\n   color = a_color.abgr;\n}",y=new ArrayBuffer(16*f),v=new Float32Array(y),b=new Uint32Array(y),L=0;return{load:t,position:n,updateTransform:function(e){m=!0,g=e},updateSize:function(e,t){u=e,c=t,m=!0},removeNode:r,createNode:function(){e(),L+=1},replaceProperties:function(){},render:i}}},{"./webgl.js":57}],65:[function(e,t){var o=e("./parseColor.js");t.exports=function(e,t){return{size:"number"==typeof e?e:10,color:o(t)}}},{"./parseColor.js":55}],66:[function(e,t){t.exports="0.8.1"},{}]},{},[1])(1)});