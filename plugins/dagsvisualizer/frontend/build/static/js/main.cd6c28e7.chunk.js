(this.webpackJsonpdagsvisualizer=this.webpackJsonpdagsvisualizer||[]).push([[0],{135:function(e,t,n){},454:function(e,t,n){"use strict";n.r(t);var r,i=n(3),a=n(27),c=n(12),o=n(4),s=n(8),l=n(11),u=n(5),h=(n(78),n(2));!function(e){e[e.Block=0]="Block",e[e.BlockBooked=1]="BlockBooked",e[e.BlockConfirmed=2]="BlockConfirmed",e[e.BlockTxConfirmationStateChanged=3]="BlockTxConfirmationStateChanged",e[e.Transaction=4]="Transaction",e[e.TransactionBooked=5]="TransactionBooked",e[e.TransactionConfirmationStateChanged=6]="TransactionConfirmationStateChanged",e[e.Conflict=7]="Conflict",e[e.ConflictParentsUpdate=8]="ConflictParentsUpdate",e[e.ConflictConfirmationStateChanged=9]="ConflictConfirmationStateChanged",e[e.ConflictWeightChanged=10]="ConflictWeightChanged"}(r||(r={}));var d={};function f(e,t){d[e]=t}function p(e){delete d[e]}function b(e,t,n,r){var i=window.location,a="ws:";"https:"===i.protocol&&(a="wss:"),a+="//"+i.host+e;var c=new WebSocket(a);c.onopen=t,c.onclose=n,c.onerror=r,c.onmessage=function(e){var t=JSON.parse(e.data),n=d[t.type];null!=n&&n(t.data)}}var j,g=n(43),m=n(13),x=n(37),O=n.n(x);!function(e){e[e.StrongRef=0]="StrongRef",e[e.WeakRef=1]="WeakRef",e[e.ShallowLikeRef=2]="ShallowLikeRef",e[e.ShallowDislikeRef=3]="ShallowDislikeRef"}(j||(j={}));var v="#b9d6dc",S="#5296A5",y="#e5daa3",k="#F0C808",C="#A31621",T="#61E294",w="#61E294",I="#b58900",D="#E7DFC6",B="#36636D",V="#10f008",N="#f00808",R="#EF8354",E="#B91372",z="#05445E",A="-",L="5 2",F="2 3",G="2 3",P=3,M=2,W=2,U=2,H=30,X=35,J=5,K=4,_=4,Q="#739A25",q="#A31621",Z=6,Y=function(){function e(t){Object(s.a)(this,e),this.graph=void 0,this.graphics=void 0,this.layout=void 0,this.renderer=void 0;var n=t(),r=Object(m.a)(n,4);this.graph=r[0],this.layout=r[1],this.graphics=r[2],this.renderer=r[3]}return Object(l.a)(e,[{key:"drawVertex",value:function(e){this.graph.addNode(e.ID,e)}},{key:"removeVertex",value:function(e){this.graph.removeNode(e)}},{key:"releaseNode",value:function(e){this.graphics.releaseNode(e)}},{key:"selectVertex",value:function(e){var t,n,r,i=this.graph.getNode(e),a=this.graphics.getNodeUI(e);a&&(Ee(a,X),n=K,r=w,(t=a).attr("stroke-width",n),t.attr("stroke",r),ie(a,this.layout.getNodePosition(i.id)))}},{key:"unselectVertex",value:function(e){var t,n=this.graphics.getNodeUI(e);n&&(Ee(n,H),(t=n).removeAttribute("stroke-width"),t.removeAttribute("stroke"))}},{key:"clearGraph",value:function(){this.graph.clear()}},{key:"centerGraph",value:function(){var e=this.layout.getGraphRect(),t=(e.y1+e.y2)/2,n=(e.x1+e.x2)/2;this.renderer.moveTo(n,t)}},{key:"centerVertex",value:function(e){var t=this.layout.getNodePosition(e);this.renderer.moveTo(t.x,t.y)}},{key:"stop",value:function(){this.renderer.dispose(),this.graph=null}},{key:"pause",value:function(){this.renderer.pause()}},{key:"resume",value:function(){this.renderer.resume()}},{key:"getNodeColor",value:function(e){var t=this.graphics.getNodeUI(e);return t?t.getAttribute("fill"):""}},{key:"nodeExist",value:function(e){return!!this.graphics.getNodeUI(e)}}]),e}();function $(){var e=O.a.Graph.graph(),t=function(e){return O.a.Graph.Layout.forceDirected(e,{springLength:10,springCoeff:1e-4,stableThreshold:.15,gravity:-2,dragCoeff:.02,timeStep:20,theta:.8})}(e),n=function(){var e=O.a.Graph.View.svgGraphics();return e.node((function(){return Be()})).placeNode(ie),e.link((function(){return Ve(B,P,A)})).placeLink((function(e,t,n){var r="M"+t.x.toFixed(2)+","+t.y.toFixed(2)+"L"+n.x.toFixed(2)+","+n.y.toFixed(2);e.attr("d",r)})),e}(),r=function(e,t,n){var r=document.getElementById("tangleVisualizer");return O.a.Graph.View.renderer(e,{container:r,graphics:t,layout:n})}(e,n,t);return r.run(),function(){var e=document.querySelector("#tangleVisualizer>svg");e.setAttribute("width","100%"),e.setAttribute("height","100%")}(),[e,t,n,r]}function ee(e,t,n){var r,i=t.graph.getNode(e.ID);i?r=i:(r=t.graph.addNode(e.ID,e),ae(e,t));var a=function(i,a){a&&a.forEach((function(a){var c=n.get(a);(c&&(c.isTip=!1,ae(c,t)),!a||r.links&&r.links.some((function(e){return e.fromId===a})))||t.graph.getNode(a)&&ce(t.graph.addLink(a,e.ID).id,t,i)}))};a(j.StrongRef,e.strongParentIDs),a(j.WeakRef,e.weakParentIDs),a(j.ShallowLikeRef,e.shallowLikeParentIDs)}function te(e,t){t.selectVertex(e);var n=t.graph.getNode(e),r=t.graphics.getNodeUI(e);if(r){Ne(r,T);return oe(t.graph,n,(function(){return!1}),!0,(function(e){Re(t.graphics.getLinkUI(e.id),R)}),[]),oe(t.graph,n,(function(){return!1}),!1,(function(e){Re(t.graphics.getLinkUI(e.id),E)}),[]),n}}function ne(e,t,n){n.unselectVertex(e);var r=n.graph.getNode(e);if(r){Ne(n.graphics.getNodeUI(e),t);oe(n.graph,r,(function(){return!1}),!0,(function(e){ce(e.id,n)}),[]),oe(n.graph,r,(function(){return!1}),!1,(function(e){ce(e.id,n)}),[])}else!function(e){e.graph.forEachLink((function(t){ce(t.id,e)}))}(n)}function re(e,t,n){n.nodeExist(e)&&t&&(n.drawVertex(t),ae(t,n),t.isMarker&&function(e,t){var n=t.graphics.getNodeUI(e);if(n.markerAdded)return;var r=O.a.Graph.svg("circle");r.attr("fill",z).attr("r",_).attr("cx",H/2).attr("cy",H/2),n.markerAdded=!0,n.append(r)}(t.ID,n))}function ie(e,t){var n=e.childNodes[0].getAttribute("width");e.attr("transform","translate("+(t.x-n/2)+","+(t.y-n/2)+")")}function ae(e,t){var n=t.graphics.getNodeUI(e.ID);if(n&&!e.isTip){var r="";r=e.isTx?y:v,e.isConfirmed&&(r=e.isTx?k:S),e.isTx&&e.isConfirmed&&(e.isTxConfirmed?function(e,t){var n=t.graphics.getNodeUI(e),r=H/5,i=H/4,a=H/8,c=H/8,o=O.a.Graph.svg("polyline");o.attr("stroke",Q).attr("stroke-width",Z).attr("points","".concat(-r+a,", ").concat(-i+c," ").concat(a,", ").concat(c," ").concat(2*r+a,", ").concat(-2*i+c," ").concat(a,", ").concat(c)),n.append(o)}(e.ID,t):function(e,t){var n=t.graphics.getNodeUI(e),r=H/5,i=H/4,a=H/8,c=H/8,o=O.a.Graph.svg("polyline");o.attr("stroke",q).attr("stroke-width",Z).attr("points","".concat(-r+a,", ").concat(i+c," ").concat(a,", ").concat(c," ").concat(r+a,", ").concat(i+c," ").concat(-r+a,", ").concat(-i+c,"  ").concat(a,",\n          ").concat(c," ").concat(r+a,", ").concat(-i+c)),n.append(o)}(e.ID,t)),Ne(n.childNodes[0],r)}}function ce(e,t,n){var r=t.graphics.getLinkUI(e);if(r)switch(void 0===n&&(n=r.refType||j.StrongRef),n){case j.StrongRef:ze(r,B,P,A),r.refType=j.StrongRef;break;case j.WeakRef:ze(r,D,M,L),r.refType=j.WeakRef;break;case j.ShallowLikeRef:ze(r,V,W,F),r.refType=j.ShallowLikeRef;break;case j.ShallowDislikeRef:ze(r,N,U,G),r.refType=j.ShallowDislikeRef}}function oe(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];a.push(t);for(var c=0;a.length>c;){var o=a[c++];if(n(o))return!0;var s,l=Object(g.a)(o.links||[]);try{for(l.s();!(s=l.n()).done;){var u=s.value;i&&i(u),r||u.toId!==o.id||a.includes(e.getNode(u.fromId))?r&&u.fromId===o.id&&!a.includes(e.getNode(u.toId))&&a.push(e.getNode(u.toId)):a.push(e.getNode(u.fromId))}}catch(h){l.e(h)}finally{l.f()}}}var se,le,ue,he,de,fe,pe,be,je,ge,me,xe,Oe,ve,Se,ye,ke,Ce,Te,we,Ie,De,Be=function(){var e=O.a.Graph.svg("g"),t=O.a.Graph.svg("rect");return Ne(t,C),Ee(t,H),function(e,t){e.attr("rx",t)}(t,J),e.append(t),e},Ve=function(e,t,n){return O.a.Graph.svg("path").attr("stroke",e).attr("stroke-width",t).attr("stroke-dasharray",n)};function Ne(e,t){e.attr("fill",t)}function Re(e,t){e.attr("stroke",t)}function Ee(e,t){e.attr("width",t),e.attr("height",t)}function ze(e,t,n,r){e.attr("stroke-width",n),e.attr("stroke-dasharray",r),e.attr("stroke",t)}var Ae=(se=function(){function e(){var t=this;Object(s.a)(this,e),Object(o.a)(this,"maxTangleVertices",le,this),Object(o.a)(this,"blocks",ue,this),Object(o.a)(this,"foundBlks",he,this),Object(o.a)(this,"markerMap",de,this),Object(o.a)(this,"selectedBlk",fe,this),Object(o.a)(this,"paused",pe,this),Object(o.a)(this,"search",be,this),this.blkOrder=[],this.lastBlkAddedBeforePause="",this.selected_origin_color="",this.highlightedBlks=new Map,this.draw=!0,this.vertexChanges=0,this.graph=void 0,Object(o.a)(this,"addBlock",je,this),this.checkLimit=function(){if(t.blkOrder.length>=t.maxTangleVertices){var e=t.blkOrder.shift();t.removeBlock(e)}},Object(o.a)(this,"addFoundBlk",ge,this),Object(o.a)(this,"clearFoundBlks",me,this),Object(o.a)(this,"removeBlock",xe,this),Object(o.a)(this,"setBlockConflict",Oe,this),Object(o.a)(this,"updateBlockTxConfirmationState",ve,this),Object(o.a)(this,"setBlockConfirmedTime",Se,this),Object(o.a)(this,"pauseResume",ye,this),Object(o.a)(this,"updateVerticesLimit",ke,this),Object(o.a)(this,"updateSearch",Ce,this),Object(o.a)(this,"searchAndSelect",Te,this),this.drawExistedBlks=function(){t.blocks.forEach((function(e){t.drawVertex(e)}))},this.updateDrawStatus=function(e){t.draw=e},this.clearGraph=function(){t.graph.clearGraph()},this.centerEntireGraph=function(){t.graph.centerGraph()},this.centerBlk=function(e){t.graph.centerVertex(e)},this.drawVertex=function(e){ee(e,t.graph,t.blocks)},this.removeVertex=function(e){t.paused||(t.graph.removeVertex(e),t.graph.releaseNode(e))},Object(o.a)(this,"tangleOnClick",we,this),Object(o.a)(this,"updateSelected",Ie,this),this.selectBlk=function(e){t.clearSelected(),t.clearHighlightedBlks(),t.selected_origin_color=t.graph.getNodeColor(e);var n=te(e,t.graph);t.updateSelected(n.data)},Object(o.a)(this,"clearSelected",De,this),this.getTangleVertex=function(e){return t.blocks.get(e)||t.foundBlks.get(e)},this.highlightBlks=function(e){t.clearHighlightedBlks(),e.forEach((function(e){var n=t.graph.getNodeColor(e);te(e,t.graph),t.highlightedBlks.set(e,n)}))},this.clearHighlightedBlks=function(){0!==t.highlightedBlks.size&&(t.highlightedBlks.forEach((function(e,n){t.clearHighlightedBlk(n)})),t.highlightedBlks.clear())},this.clearHighlightedBlk=function(e){ne(e,t.selectedBlk&&e===t.selectedBlk.ID?t.selected_origin_color:t.highlightedBlks.get(e),t.graph)},this.getBlksFromConflict=function(e,n){var r=[];return n?(t.foundBlks.forEach((function(t){t.conflictIDs.includes(e)&&r.push(t.ID)})),r):(t.blocks.forEach((function(t){t.conflictIDs.includes(e)&&r.push(t.ID)})),r)},this.start=function(){t.graph=new Y($),t.registerTangleEvents()},this.stop=function(){t.unregisterHandlers(),t.graph.stop(),t.selectedBlk=null},this.registerTangleEvents=function(){document.querySelector("#tangleVisualizer").addEventListener("click",t.tangleOnClick)},this.svgRendererOnResume=function(){if(!t.blocks.get(t.lastBlkAddedBeforePause))return t.clearGraph(),void t.drawExistedBlks();var e,n;e=t.graph,n=t.blocks,e.graph.forEachNode((function(t){var r=n.get(t.id);r?re(r.ID,r,e):e.graph.removeNode(t.id)}));var r=t.blkOrder.indexOf(t.lastBlkAddedBeforePause);!function(e,t,n){e.graph.forEachNode((function(t){var r=n.get(t.id);r?re(r.ID,r,e):e.removeVertex(t.id)}));var r,i=Object(g.a)(t);try{for(i.s();!(r=i.n()).done;){var a=r.value,c=n.get(a);c&&(ee(c,e,n),ae(c,e))}}catch(o){i.e(o)}finally{i.f()}}(t.graph,t.blkOrder.slice(r),t.blocks)},this.updateIfNotPaused=function(e){t.paused||re(e.ID,e,t.graph)},Object(h.n)(this),f(r.Block,this.addBlock),f(r.BlockBooked,this.setBlockConflict),f(r.BlockConfirmed,this.setBlockConfirmedTime),f(r.BlockTxConfirmationStateChanged,this.updateBlockTxConfirmationState)}return Object(l.a)(e,[{key:"unregisterHandlers",value:function(){p(r.Block),p(r.BlockBooked),p(r.BlockConfirmed),p(r.BlockTxConfirmationStateChanged)}},{key:"trimTangleToVerticesLimit",value:function(){if(this.blkOrder.length>=this.maxTangleVertices){var e=this.blkOrder.length-this.maxTangleVertices,t=this.blkOrder.slice(0,e);this.blkOrder=this.blkOrder.slice(e),this.removeBlocks(t)}}},{key:"removeBlocks",value:function(e){var t=this;e.forEach((function(e){t.removeBlock(e)}))}}]),e}(),le=Object(u.a)(se.prototype,"maxTangleVertices",[h.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 500}}),ue=Object(u.a)(se.prototype,"blocks",[h.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h.b}}),he=Object(u.a)(se.prototype,"foundBlks",[h.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h.b}}),de=Object(u.a)(se.prototype,"markerMap",[h.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h.b}}),fe=Object(u.a)(se.prototype,"selectedBlk",[h.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=Object(u.a)(se.prototype,"paused",[h.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),be=Object(u.a)(se.prototype,"search",[h.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),je=Object(u.a)(se.prototype,"addBlock",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.checkLimit(),t.isTip=!0,e.blkOrder.push(t.ID),e.blocks.set(t.ID,t),e.draw&&!e.paused&&e.drawVertex(t)}}}),ge=Object(u.a)(se.prototype,"addFoundBlk",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.foundBlks.set(t.ID,t)}}}),me=Object(u.a)(se.prototype,"clearFoundBlks",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.foundBlks.clear()}}}),xe=Object(u.a)(se.prototype,"removeBlock",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=e.blocks.get(t);n&&(n.isMarker&&e.markerMap.delete(t),e.removeVertex(t),e.blocks.delete(t))}}}),Oe=Object(u.a)(se.prototype,"setBlockConflict",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=e.blocks.get(t.ID);n&&(n.conflictIDs=t.conflictIDs,n.isMarker=t.isMarker,e.blocks.set(n.ID,n),e.draw&&e.updateIfNotPaused(n))}}}),ve=Object(u.a)(se.prototype,"updateBlockTxConfirmationState",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=e.blocks.get(t.ID);n&&(t.isConfirmed?n.isTxConfirmed=!0:n.isTxConfirmed=!1,e.blocks.set(n.ID,n),e.draw&&e.updateIfNotPaused(n))}}}),Se=Object(u.a)(se.prototype,"setBlockConfirmedTime",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=e.blocks.get(t.ID);n&&(n.confirmationState=t.confirmationState,n.isConfirmed=!0,n.confirmationStateTime=t.confirmationStateTime,e.blocks.set(n.ID,n),e.draw&&e.updateIfNotPaused(n))}}}),ye=Object(u.a)(se.prototype,"pauseResume",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){if(e.paused)return e.graph.resume(),e.paused=!1,void e.svgRendererOnResume();e.lastBlkAddedBeforePause=e.blkOrder[e.blkOrder.length-1],e.graph.pause(),e.paused=!0}}}),ke=Object(u.a)(se.prototype,"updateVerticesLimit",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.maxTangleVertices=t,e.trimTangleToVerticesLimit()}}}),Ce=Object(u.a)(se.prototype,"updateSearch",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.search=t.trim()}}}),Te=Object(u.a)(se.prototype,"searchAndSelect",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.search&&(e.selectBlk(e.search),e.centerBlk(e.search))}}}),we=Object(u.a)(se.prototype,"tangleOnClick",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){"rect"===t.target.tagName?e.selectBlk(t.target.parentNode.node.id):null!==e.selectedBlk&&e.clearSelected()}}}),Ie=Object(u.a)(se.prototype,"updateSelected",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){t&&(e.selectedBlk=t)}}}),De=Object(u.a)(se.prototype,"clearSelected",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.selectedBlk&&(e.clearHighlightedBlk(e.selectedBlk.ID),e.selectedBlk=null)}}}),se),Le=n(99),Fe=n.n(Le),Ge=n(100),Pe=n.n(Ge),Me=(n(135),n(30)),We=n.n(Me),Ue=n(51),He=n(110),Xe=n.n(He),Je={name:"dagre",nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:"LR",ranker:void 0,minLen:function(){return 1},edgeWeight:function(){return 1},fit:!0,padding:30,spacingFactor:void 0,nodeDimensionsIncludeLabels:!1,animate:!1,animationDuration:500,animationEasing:void 0,boundingBox:void 0,transform:function(e,t){return t},ready:function(){return!0},stop:function(){return!0}},Ke={name:"dagre",nodeSep:void 0,edgeSep:void 0,rankSep:200,rankDir:"LR",ranker:void 0,minLen:function(){return 1},edgeWeight:function(){return 1},fit:!0,padding:30,spacingFactor:void 0,nodeDimensionsIncludeLabels:!1,animate:!1,animationDuration:500,animationEasing:void 0,boundingBox:void 0,transform:function(e,t){return t},ready:function(){return!0},stop:function(){return!0}},_e="#EF8354",Qe="#B91372",qe="#5296A5",Ze="#F0C808",Ye="#61E294",$e="#B91372",et="black",tt="#696969",nt="bezier",rt="dagre",it="#5296A5",at="#F0C808",ct="20px",ot="#61E294",st=1,lt="#A31621",ut="#E7DFC6",ht=function(){function e(t,n){Object(s.a)(this,e),this.cy=void 0,this.layout=void 0,this.layoutApi=void 0,t.forEach((function(e){Xe.a.use(e)}));var r=n(),i=Object(m.a)(r,3);this.cy=i[0],this.layout=i[1],this.layoutApi=i[2]}return Object(l.a)(e,[{key:"drawVertex",value:function(e){this.cy.add(e)}},{key:"removeVertex",value:function(e){var t=this.cy.getElementById(e).children();this.cy.remove("#"+e),this.cy.remove(t)}},{key:"selectVertex",value:function(e){var t=this.cy.getElementById(e);t&&t.select()}},{key:"unselectVertex",value:function(e){var t=this.cy.getElementById(e);t&&t.unselect()}},{key:"centerVertex",value:function(e){var t=this.cy.getElementById(e);t&&this.cy.center(t)}},{key:"centerGraph",value:function(){this.cy.center()}},{key:"clearGraph",value:function(){this.cy.elements().remove()}},{key:"updateLayout",value:function(){this.cy.layout(this.layout).run()}},{key:"addNodeEventListener",value:function(e,t){this.cy.on(e,"node",t)}}]),e}();function dt(e,t,n){var r=t.cy.collection();r=r.union(t.cy.add({group:"nodes",data:{id:e.ID},classes:"transaction"}));var i=e.ID+"_input",a="";e.inputs.length>1&&(a=e.inputs.length+" inputs"),r=r.union(t.cy.add({group:"nodes",data:{id:i,parent:e.ID,label:a},classes:["input","center-center"]})),e.inputs.forEach((function(e){var a=n.get(e.referencedOutputID.base58);a&&(r=r.union(t.cy.add({group:"edges",data:{source:a+"_output",target:i}})))}));var c=e.ID+"_output",o="";e.outputs.length>1&&(o=e.outputs.length+" outputs"),r=(r=r.union(t.cy.add({group:"nodes",data:{id:c,parent:e.ID,label:o},classes:["output","center-center"]}))).union(t.cy.add({group:"edges",data:{source:i,target:c},classes:"invisible"})),At(e,t),t.layoutApi.placeNewNodes(r)}var ft,pt,bt,jt,gt,mt,xt,Ot,vt,St,yt,kt,Ct,Tt,wt,It,Dt,Bt,Vt,Nt=function(e,t,n){if(e){var r;try{r=t.cy.add({group:"nodes",data:{id:e.ID}})}catch(i){}return n.set(e.ID,e),Lt(e,t),r&&(t.layoutApi.placeNewNodes(r),e.isConfirmed&&r.addClass("confirmed")),r}};function Rt(e,t,n){return Et.apply(this,arguments)}function Et(){return(Et=Object(Ue.a)(We.a.mark((function e(t,n,r){var i,a,c;return We.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:Nt(t,n,r),t.parents=t.parents||[],i=0;case 5:if(!(i<t.parents.length)){e.next=23;break}if(a=t.parents[i],!r.get(a)){e.next=12;break}n.cy.add({group:"edges",data:{source:a,target:t.ID}}),e.next=20;break;case 12:return e.next=14,fetch("/api/dagsvisualizer/conflict/".concat(a));case 14:return c=e.sent,e.next=17,c.json();case 17:zt(e.sent,n,r),n.cy.add({group:"edges",data:{source:a,target:t.ID}});case 20:i++,e.next=5;break;case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zt(e,t,n){for(var r=function(r){var i,a=e[r];Nt(a,t,n),null===(i=a.parents)||void 0===i||i.forEach((function(r){var i=e.find((function(e){return e.ID===r}));i&&(n.get(r)||Nt(i,t,n),t.cy.add({group:"edges",data:{source:i.ID,target:a.ID}}))}))},i=0;i<e.length;i++)r(i)}function At(e,t){if(e){var n=t.cy.getElementById(e.ID);n&&(e.isConfirmed?n.addClass("confirmed"):n.hasClass("confirmed")&&n.removeClass("confirmed"))}}function Lt(e,t){if(e){var n=t.cy.getElementById(e.ID);n&&(e.isConfirmed?n.addClass("confirmed"):n.hasClass("confirmed")&&n.removeClass("confirmed"))}}function Ft(e,t){var n=t.cy.getElementById(e);n&&n.removeClass("confirmed")}function Gt(){var e=Xe()({container:document.getElementById("utxoVisualizer"),style:[{selector:"node",style:{"font-weight":"bold",shape:"rectangle",width:20,height:20}},{selector:"edge",style:{width:1,"curve-style":nt,"line-color":tt,"control-point-step-size":"10px",events:"no"}},{selector:":parent",style:{"background-color":qe,"min-width":"50px","min-height":"50px","border-color":et}},{selector:"node:selected",style:{"background-color":Ye,"border-color":$e}},{selector:".input",style:{"background-color":_e,"font-size":16,"padding-bottom":"2px",label:"data(label)",events:"no"}},{selector:".output",style:{"background-color":Qe,"font-size":16,label:"data(label)",events:"no"}},{selector:".confirmed",style:{"background-color":Ze}},{selector:".invisible",style:{visibility:"hidden"}}],layout:{name:rt}}),t=Je,n=e.layoutUtilities({desiredAspectRatio:1,polyominoGridSizeFactor:1,utilityFunction:0,componentSpacing:80});return[e,t,n]}function Pt(){var e=Xe()({container:document.getElementById("conflictVisualizer"),style:[{selector:"node",style:{"background-color":it,shape:"rectangle",width:25,height:15}},{selector:"edge",style:{width:1,"curve-style":nt,"line-color":tt,"control-point-step-size":ct,events:"no"}},{selector:"node:selected",style:{"background-opacity":st,"background-color":ot}},{selector:".search",style:{}},{selector:".search:selected",style:{"background-color":ot}},{selector:".confirmed",style:{"background-color":at}}],layout:{name:rt}}),t=Ke,n=e.layoutUtilities({desiredAspectRatio:1,polyominoGridSizeFactor:1,utilityFunction:0,componentSpacing:200});return[e,t,n]}var Mt,Wt,Ut,Ht,Xt,Jt,Kt,_t,Qt,qt,Zt,Yt,$t,en,tn,nn,rn,an,cn,on,sn,ln,un,hn,dn,fn,pn,bn,jn,gn,mn,xn,On,vn,Sn,yn,kn,Cn=(ft=function(){function e(){var t=this;Object(s.a)(this,e),Object(o.a)(this,"maxUTXOVertices",pt,this),Object(o.a)(this,"transactions",bt,this),Object(o.a)(this,"foundTxs",jt,this),Object(o.a)(this,"selectedTx",gt,this),Object(o.a)(this,"paused",mt,this),Object(o.a)(this,"search",xt,this),this.foundOutputMap=new Map,this.outputMap=new Map,this.txOrder=[],this.highlightedTxs=[],this.draw=!0,this.vertexChanges=0,this.txToRemoveAfterResume=[],this.txToAddAfterResume=[],this.layoutUpdateTimerID=void 0,this.graph=void 0,Object(o.a)(this,"addTransaction",Ot,this),this.checkLimit=function(){if(t.txOrder.length>=t.maxUTXOVertices){var e=t.txOrder.shift();t.transactions.get(e).outputs.forEach((function(e){t.outputMap.delete(e)})),t.transactions.delete(e),t.paused?t.txToRemoveAfterResume.push(e):t.removeVertex(e)}},Object(o.a)(this,"addFoundTx",vt,this),Object(o.a)(this,"clearFoundTxs",St,this),Object(o.a)(this,"setTxConflict",yt,this),Object(o.a)(this,"transactionConfirmationStateChanged",kt,this),Object(o.a)(this,"setTXConfirmationStateTime",Ct,this),Object(o.a)(this,"updateSelected",Tt,this),Object(o.a)(this,"clearSelected",wt,this),Object(o.a)(this,"pauseResume",It,this),Object(o.a)(this,"updateVerticesLimit",Dt,this),Object(o.a)(this,"updateSearch",Bt,this),Object(o.a)(this,"searchAndSelect",Vt,this),this.selectTx=function(e){t.clearSelected(!0),t.graph.selectVertex(e),t.updateSelected(e)},this.getTxsFromConflict=function(e,n){var r=[];return n?(t.foundTxs.forEach((function(t){t.conflictID===e&&r.push(t.ID)})),r):(t.transactions.forEach((function(t){t.conflictID===e&&r.push(t.ID)})),r)},this.resumeAndSyncGraph=function(){t.txToAddAfterResume.forEach((function(e){var n=t.transactions.get(e);n&&t.drawVertex(n)})),t.txToAddAfterResume=[],t.txToRemoveAfterResume.forEach((function(e){t.removeVertex(e)})),t.txToRemoveAfterResume=[]},this.drawExistedTxs=function(){t.transactions.forEach((function(e){t.drawVertex(e)}))},this.updateDrawStatus=function(e){t.draw=e},this.drawFoundVertex=function(e){dt(e,t.graph,t.foundOutputMap),t.vertexChanges++},this.drawVertex=function(e){dt(e,t.graph,t.outputMap),At(e,t.graph),t.vertexChanges++},this.removeVertex=function(e){t.graph.removeVertex(e),t.vertexChanges++},this.highlightTxs=function(e){t.clearHighlightedTxs(),t.highlightedTxs=e,e.forEach((function(e){t.graph.selectVertex(e)}))},this.clearHighlightedTxs=function(){t.highlightedTxs.forEach((function(e){t.graph.unselectVertex(e)}))},this.centerTx=function(e){t.graph.centerVertex(e)},this.centerEntireGraph=function(){t.graph.centerGraph()},this.clearGraph=function(){t.graph.clearGraph()},this.updateLayoutTimer=function(){t.layoutUpdateTimerID=setInterval((function(){t.vertexChanges>0&&!t.paused&&(t.graph.updateLayout(),t.vertexChanges=0)}),1e4)},this.start=function(){t.graph=new ht([Fe.a,Pe.a],Gt),t.graph.addNodeEventListener("select",(function(e){var n=e.target.json();t.updateSelected(n.data.id)})),t.graph.addNodeEventListener("unselect",(function(){t.clearSelected()})),t.updateLayoutTimer()},this.stop=function(){t.unregisterHandlers(),clearInterval(t.layoutUpdateTimerID)},Object(h.n)(this),f(r.Transaction,this.addTransaction),f(r.TransactionBooked,this.setTxConflict),f(r.TransactionConfirmationStateChanged,this.transactionConfirmationStateChanged)}return Object(l.a)(e,[{key:"unregisterHandlers",value:function(){p(r.Transaction),p(r.TransactionBooked),p(r.TransactionConfirmationStateChanged)}},{key:"trimTxToVerticesLimit",value:function(){if(this.txOrder.length>=this.maxUTXOVertices){var e=this.txOrder.length-this.maxUTXOVertices,t=this.txOrder.slice(0,e);this.txOrder=this.txOrder.slice(e),this.removeTxs(t)}}},{key:"removeTxs",value:function(e){var t=this;e.forEach((function(e){var n=t.transactions.get(e);n&&(t.removeVertex(e),n.outputs.forEach((function(e){t.outputMap.delete(e)})),t.transactions.delete(e))}))}},{key:"updateUTXO",value:function(e){var t=this.transactions.get(e.ID);t&&At(t,this.graph)}}]),e}(),pt=Object(u.a)(ft.prototype,"maxUTXOVertices",[h.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 500}}),bt=Object(u.a)(ft.prototype,"transactions",[h.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h.b}}),jt=Object(u.a)(ft.prototype,"foundTxs",[h.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h.b}}),gt=Object(u.a)(ft.prototype,"selectedTx",[h.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mt=Object(u.a)(ft.prototype,"paused",[h.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),xt=Object(u.a)(ft.prototype,"search",[h.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ot=Object(u.a)(ft.prototype,"addTransaction",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.checkLimit(),e.txOrder.push(t.ID),e.transactions.set(t.ID,t),t.outputs.forEach((function(n){e.outputMap.set(n,t.ID)})),e.paused?e.txToAddAfterResume.push(t.ID):e.draw&&e.drawVertex(t)}}}),vt=Object(u.a)(ft.prototype,"addFoundTx",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.foundTxs.set(t.ID,t),t.outputs.forEach((function(n){e.foundOutputMap.set(n,t.ID)}))}}}),St=Object(u.a)(ft.prototype,"clearFoundTxs",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.foundTxs.clear(),e.foundOutputMap.clear()}}}),yt=Object(u.a)(ft.prototype,"setTxConflict",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=e.transactions.get(t.ID);n&&(n.conflictID=t.conflictID,e.transactions.set(t.ID,n))}}}),kt=Object(u.a)(ft.prototype,"transactionConfirmationStateChanged",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.setTXConfirmationStateTime(t),e.updateUTXO(t)}}}),Ct=Object(u.a)(ft.prototype,"setTXConfirmationStateTime",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=e.transactions.get(t.ID);n&&(t.isConfirmed?n.isConfirmed=!0:n.isConfirmed=!1,n.confirmationStateTime=t.confirmationStateTime,n.confirmationState=t.confirmationState,e.transactions.set(t.ID,n))}}}),Tt=Object(u.a)(ft.prototype,"updateSelected",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=e.transactions.get(t)||e.foundTxs.get(t);n&&(e.selectedTx=n,Ft(t,e.graph))}}}),wt=Object(u.a)(ft.prototype,"clearSelected",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){t&&e.selectedTx&&e.graph.unselectVertex(e.selectedTx.ID),e.selectedTx&&At(e.selectedTx,e.graph),e.selectedTx=null}}}),It=Object(u.a)(ft.prototype,"pauseResume",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){if(e.paused)return e.resumeAndSyncGraph(),void(e.paused=!1);e.paused=!0}}}),Dt=Object(u.a)(ft.prototype,"updateVerticesLimit",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.maxUTXOVertices=t,e.trimTxToVerticesLimit()}}}),Bt=Object(u.a)(ft.prototype,"updateSearch",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.search=t.trim()}}}),Vt=Object(u.a)(ft.prototype,"searchAndSelect",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.search&&(e.selectTx(e.search),e.centerTx(e.search))}}}),ft),Tn=(Mt=function(){function e(){var t=this;Object(s.a)(this,e),Object(o.a)(this,"maxConflictVertices",Wt,this),Object(o.a)(this,"conflicts",Ut,this),Object(o.a)(this,"foundConflicts",Ht,this),this.conflictsBeforeSearching=void 0,Object(o.a)(this,"selectedConflict",Xt,this),Object(o.a)(this,"paused",Jt,this),Object(o.a)(this,"search",Kt,this),this.conflictOrder=[],this.highlightedConflicts=[],this.draw=!0,this.vertexChanges=0,this.conflictToRemoveAfterResume=[],this.conflictToAddAfterResume=[],this.layoutUpdateTimerID=void 0,this.graph=void 0,Object(o.a)(this,"addConflict",_t,this),this.checkLimit=function(){if(t.conflictOrder.length>=t.maxConflictVertices){var e=t.conflictOrder.shift();t.paused?t.conflictToRemoveAfterResume.push(e):t.removeVertex(e)}},Object(o.a)(this,"addFoundConflict",Qt,this),Object(o.a)(this,"clearFoundConflicts",qt,this),Object(o.a)(this,"updateParents",Zt,this),Object(o.a)(this,"conflictConfirmationStateChanged",Yt,this),Object(o.a)(this,"conflictWeightChanged",$t,this),Object(o.a)(this,"updateSelected",en,this),Object(o.a)(this,"clearSelected",tn,this),Object(o.a)(this,"pauseResume",nn,this),Object(o.a)(this,"updateVerticesLimit",rn,this),Object(o.a)(this,"updateSearch",an,this),Object(o.a)(this,"searchAndHighlight",cn,this),this.getConflictVertex=function(e){return t.conflicts.get(e)||t.foundConflicts.get(e)},this.drawExistedConflicts=function(){var e,n=Object(g.a)(t.conflictsBeforeSearching.values());try{for(n.s();!(e=n.n()).done;){var r=e.value;t.drawVertex(r)}}catch(i){n.e(i)}finally{n.f()}t.resumeAndSyncGraph(),t.conflictsBeforeSearching=void 0},this.updateDrawStatus=function(e){t.draw=e},this.resumeAndSyncGraph=function(){t.conflictToAddAfterResume.forEach((function(e){var n=t.conflicts.get(e);n&&t.drawVertex(n)})),t.conflictToAddAfterResume=[],t.conflictToRemoveAfterResume.forEach((function(e){t.removeVertex(e)})),t.conflictToRemoveAfterResume=[]},this.drawVertex=function(){var e=Object(Ue.a)(We.a.mark((function e(n){return We.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.vertexChanges++,e.next=3,Rt(n,t.graph,t.conflicts);case 3:Lt(n,t.graph);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.removeVertex=function(e){t.vertexChanges++,t.graph.removeVertex(e),t.conflicts.delete(e)},this.highlightConflicts=function(e){t.clearHighlightedConflicts(),t.highlightedConflicts=e,e.forEach((function(e){t.graph.selectVertex(e)}))},this.clearHighlightedConflicts=function(){t.highlightedConflicts.forEach((function(e){t.graph.unselectVertex(e)}))},this.selectConflict=function(e){t.clearSelected(!0),t.graph.selectVertex(e),t.updateSelected(e),Ft(t.selectedConflict.ID,t.graph)},this.centerConflict=function(e){t.graph.centerVertex(e)},this.centerEntireGraph=function(){t.graph.centerGraph()},this.clearGraph=function(){t.graph.clearGraph(),t.conflictsBeforeSearching||(t.conflictsBeforeSearching=new Map,t.conflicts.forEach((function(e,n){t.conflictsBeforeSearching.set(n,e)}))),t.conflicts.clear(),t.addMasterConflict()},this.updateLayoutTimer=function(){t.layoutUpdateTimerID=setInterval((function(){t.vertexChanges>0&&!t.paused&&(t.graph.updateLayout(),t.vertexChanges=0)}),1e4)},this.addMasterConflict=function(){var e={ID:"4uQeVj5tqViQh7yWWGStvkEG1Zmhx6uasJtWCJziofM",parents:[],isConfirmed:!0,conflicts:null,confirmationState:"Confirmed",aw:0};return t.conflicts.set("4uQeVj5tqViQh7yWWGStvkEG1Zmhx6uasJtWCJziofM",e),t.graph.drawVertex({data:{id:"4uQeVj5tqViQh7yWWGStvkEG1Zmhx6uasJtWCJziofM",label:"master"},style:{"background-color":lt,label:"master",color:ut}}),e},this.start=function(){t.graph=new ht([Fe.a,Pe.a],Pt);var e=t.addMasterConflict();t.graph.centerVertex(e.ID),t.graph.addNodeEventListener("select",(function(e){var n=e.target.json();t.updateSelected(n.data.id)})),t.graph.addNodeEventListener("unselect",(function(){t.clearSelected()})),t.updateLayoutTimer()},this.stop=function(){t.unregisterHandlers(),clearInterval(t.layoutUpdateTimerID)},Object(h.n)(this),f(r.Conflict,this.addConflict),f(r.ConflictParentsUpdate,this.updateParents),f(r.ConflictConfirmationStateChanged,this.conflictConfirmationStateChanged),f(r.ConflictWeightChanged,this.conflictWeightChanged)}return Object(l.a)(e,[{key:"unregisterHandlers",value:function(){p(r.Conflict),p(r.ConflictParentsUpdate),p(r.ConflictConfirmationStateChanged),p(r.ConflictWeightChanged)}},{key:"trimConflictToVerticesLimit",value:function(){if(this.conflictOrder.length>=this.maxConflictVertices){var e=this.conflictOrder.length-this.maxConflictVertices,t=this.conflictOrder.slice(0,e);this.conflictOrder=this.conflictOrder.slice(e),this.removeConflicts(t)}}},{key:"removeConflicts",value:function(e){var t=this;e.forEach((function(e){t.conflicts.get(e)&&(t.removeVertex(e),t.conflicts.delete(e))}))}}]),e}(),Wt=Object(u.a)(Mt.prototype,"maxConflictVertices",[h.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 500}}),Ut=Object(u.a)(Mt.prototype,"conflicts",[h.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h.b}}),Ht=Object(u.a)(Mt.prototype,"foundConflicts",[h.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h.b}}),Xt=Object(u.a)(Mt.prototype,"selectedConflict",[h.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Jt=Object(u.a)(Mt.prototype,"paused",[h.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Kt=Object(u.a)(Mt.prototype,"search",[h.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_t=Object(u.a)(Mt.prototype,"addConflict",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.checkLimit(),e.conflictOrder.push(t.ID),e.paused&&e.conflictToAddAfterResume.push(t.ID),e.draw&&e.drawVertex(t)}}}),Qt=Object(u.a)(Mt.prototype,"addFoundConflict",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.foundConflicts.set(t.ID,t)}}}),qt=Object(u.a)(Mt.prototype,"clearFoundConflicts",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.foundConflicts.clear()}}}),Zt=Object(u.a)(Mt.prototype,"updateParents",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=e.conflicts.get(t.ID);n&&(n.parents=t.parents,e.drawVertex(n))}}}),Yt=Object(u.a)(Mt.prototype,"conflictConfirmationStateChanged",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=e.conflicts.get(t.ID);n&&(t.isConfirmed?n.isConfirmed=!0:n.isConfirmed=!1,n.confirmationState=t.confirmationState,e.conflicts.set(t.ID,n),Lt(n,e.graph))}}}),$t=Object(u.a)(Mt.prototype,"conflictWeightChanged",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=e.conflicts.get(t.ID);n&&(n.aw=t.weight,n.confirmationState=t.confirmationState,e.conflicts.set(t.ID,n))}}}),en=Object(u.a)(Mt.prototype,"updateSelected",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=e.conflicts.get(t)||e.foundConflicts.get(t);n&&(e.selectedConflict=n,Ft(n.ID,e.graph))}}}),tn=Object(u.a)(Mt.prototype,"clearSelected",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){t&&e.selectedConflict&&e.graph.unselectVertex(e.selectedConflict.ID),Lt(e.selectedConflict,e.graph),e.selectedConflict=null}}}),nn=Object(u.a)(Mt.prototype,"pauseResume",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){if(e.paused)return e.resumeAndSyncGraph(),void(e.paused=!1);e.paused=!0}}}),rn=Object(u.a)(Mt.prototype,"updateVerticesLimit",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.maxConflictVertices=t,e.trimConflictToVerticesLimit()}}}),an=Object(u.a)(Mt.prototype,"updateSearch",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.search=t.trim()}}}),cn=Object(u.a)(Mt.prototype,"searchAndHighlight",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.search&&(e.selectConflict(e.search),e.centerConflict(e.search))}}}),Mt),wn=n(21),In=n.n(wn),Dn=(on=function(){function e(t,n,r){var i=this;Object(s.a)(this,e),Object(o.a)(this,"searchStartingTime",sn,this),Object(o.a)(this,"searchEndingTime",ln,this),Object(o.a)(this,"explorerAddress",un,this),Object(o.a)(this,"searchResponse",hn,this),Object(o.a)(this,"previewResponseSize",dn,this),Object(o.a)(this,"manualPicker",fn,this),this.searchResult=void 0,this.searchMode=!1,this.tangleStore=void 0,this.utxoStore=void 0,this.conflictStore=void 0,Object(o.a)(this,"updateStartManualPicker",pn,this),Object(o.a)(this,"updateEndManualPicker",bn,this),this.syncWithBlk=function(){var e=i.tangleStore.selectedBlk;e&&(i.utxoStore.clearSelected(!0),i.utxoStore.clearHighlightedTxs(),i.conflictStore.clearSelected(!0),i.conflictStore.clearHighlightedConflicts(),e.isTx&&(i.utxoStore.selectTx(e.txID),i.utxoStore.centerTx(e.txID)),i.conflictStore.highlightConflicts(e.conflictIDs))},this.syncWithTx=function(){var e=i.utxoStore.selectedTx;e&&(i.tangleStore.clearSelected(),i.tangleStore.clearHighlightedBlks(),i.conflictStore.clearSelected(!0),i.tangleStore.getTangleVertex(e.blkID)&&(i.tangleStore.selectBlk(e.blkID),i.tangleStore.centerBlk(e.blkID)),i.conflictStore.getConflictVertex(e.conflictID)&&(i.conflictStore.selectConflict(e.conflictID),i.conflictStore.centerConflict(e.conflictID)))},this.syncWithConflict=function(){var e=i.conflictStore.selectedConflict;if(e){var t=i.tangleStore.getBlksFromConflict(e.ID,i.searchMode);i.tangleStore.clearSelected(),i.tangleStore.clearHighlightedBlks(),i.tangleStore.highlightBlks(t);var n=i.utxoStore.getTxsFromConflict(e.ID,i.searchMode);i.utxoStore.clearSelected(!0),i.utxoStore.clearHighlightedTxs(),i.utxoStore.highlightTxs(n)}},this.clearSync=function(){i.tangleStore.clearSelected(),i.tangleStore.clearHighlightedBlks(),i.utxoStore.clearSelected(!0),i.utxoStore.clearHighlightedTxs(),i.conflictStore.clearSelected(!0)},Object(o.a)(this,"updateExplorerAddress",jn,this),Object(o.a)(this,"updateSearchStartingTime",gn,this),Object(o.a)(this,"updateSearchEndingTime",mn,this),Object(o.a)(this,"updateSearchResponse",xn,this),Object(o.a)(this,"updatePreviewSearchResponse",On,this),this.updateSearchResults=function(e){i.searchResult=e},Object(o.a)(this,"updatePreviewResponseSize",vn,this),Object(o.a)(this,"searchAndDrawResults",Sn,this),Object(o.a)(this,"renderSearchResults",yn,this),Object(o.a)(this,"clearSearchAndResume",kn,this),Object(h.n)(this),this.tangleStore=t,this.utxoStore=n,this.conflictStore=r}return Object(l.a)(e,[{key:"SearchStartingTime",get:function(){return In()(this.searchStartingTime)}},{key:"SearchEndingTime",get:function(){return In()(this.searchStartingTime)}},{key:"drawNewVertices",value:function(){this.tangleStore.updateDrawStatus(!0),this.utxoStore.updateDrawStatus(!0),this.conflictStore.updateDrawStatus(!0)}},{key:"stopDrawNewVertices",value:function(){this.tangleStore.updateDrawStatus(!1),this.utxoStore.updateDrawStatus(!1),this.conflictStore.updateDrawStatus(!1)}},{key:"clearSelectedVertices",value:function(){this.tangleStore.clearSelected(),this.utxoStore.clearSelected(),this.conflictStore.clearSelected()}},{key:"clearGraphs",value:function(){this.tangleStore.clearGraph(),this.conflictStore.clearGraph(),this.utxoStore.clearGraph()}},{key:"clearFoundVertices",value:function(){this.tangleStore.clearFoundBlks(),this.utxoStore.clearFoundTxs(),this.conflictStore.clearFoundConflicts()}}]),e}(),sn=Object(u.a)(on.prototype,"searchStartingTime",[h.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return In()().unix()}}),ln=Object(u.a)(on.prototype,"searchEndingTime",[h.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return In()().unix()}}),un=Object(u.a)(on.prototype,"explorerAddress",[h.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"http://localhost:8081"}}),hn=Object(u.a)(on.prototype,"searchResponse",[h.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),dn=Object(u.a)(on.prototype,"previewResponseSize",[h.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),fn=Object(u.a)(on.prototype,"manualPicker",[h.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[!1,!1]}}),pn=Object(u.a)(on.prototype,"updateStartManualPicker",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.manualPicker[0]=t}}}),bn=Object(u.a)(on.prototype,"updateEndManualPicker",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.manualPicker[1]=t}}}),jn=Object(u.a)(on.prototype,"updateExplorerAddress",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.explorerAddress=t}}}),gn=Object(u.a)(on.prototype,"updateSearchStartingTime",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.searchStartingTime=t.unix()}}}),mn=Object(u.a)(on.prototype,"updateSearchEndingTime",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.searchEndingTime=t.unix()}}}),xn=Object(u.a)(on.prototype,"updateSearchResponse",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.searchResponse=t}}}),On=Object(u.a)(on.prototype,"updatePreviewSearchResponse",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.previewResponseSize=t}}}),vn=Object(u.a)(on.prototype,"updatePreviewResponseSize",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=t.conflicts.length,r=t.blocks.length,i=t.txs.length;e.updatePreviewSearchResponse("Found: blocks: ".concat(r,";\n            transactions: ").concat(i,";\n            conflicts: ").concat(n,";"))}}}),Sn=Object(u.a)(on.prototype,"searchAndDrawResults",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(Ue.a)(We.a.mark((function t(){var n,r;return We.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/api/dagsvisualizer/search/".concat(e.searchStartingTime,"/").concat(e.searchEndingTime));case 3:return n=t.sent,t.next=6,n.json();case 6:if(r=t.sent,200===n.status){t.next=12;break}return e.updateSearchResponse(r.error),t.abrupt("return");case 12:e.updateSearchResponse('To show the results click "Render"'),e.updatePreviewResponseSize(r);case 14:if(0!==r.blocks.length){t.next=17;break}return e.updateSearchResponse("no blocks found!"),t.abrupt("return");case 17:e.updateSearchResults(r),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(0),console.log("Fail to fetch blocks/txs/conflicts with the given interval",t.t0);case 23:return t.abrupt("return");case 24:case"end":return t.stop()}}),t,null,[[0,20]])})))}}),yn=Object(u.a)(on.prototype,"renderSearchResults",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(Ue.a)(We.a.mark((function t(){var n,r;return We.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.searchResult){t.next=2;break}return t.abrupt("return");case 2:e.searchMode=!0,e.stopDrawNewVertices(),e.clearGraphs(),(e.searchResult.blocks||[]).forEach((function(t){e.tangleStore.addFoundBlk(t),e.tangleStore.drawVertex(t)})),(e.searchResult.txs||[]).forEach((function(t){e.utxoStore.addFoundTx(t),e.utxoStore.drawFoundVertex(t)})),n=e.searchResult.conflicts||[],r=0;case 9:if(!(r<n.length)){t.next=17;break}return e.conflictStore.addFoundConflict(n[r]),t.next=13,e.conflictStore.drawVertex(n[r]);case 13:e.conflictStore.graph.cy.getElementById(n[r].ID).addClass("search");case 14:r++,t.next=9;break;case 17:return e.searchResult=void 0,e.updateSearchResponse(""),t.abrupt("return");case 20:case"end":return t.stop()}}),t)})))}}),kn=Object(u.a)(on.prototype,"clearSearchAndResume",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.searchMode=!1,e.clearFoundVertices(),e.clearGraphs(),e.clearSelectedVertices(),e.tangleStore.drawExistedBlks(),e.utxoStore.drawExistedTxs(),e.conflictStore.drawExistedConflicts(),e.drawNewVertices(),e.updateSearchResponse(""),e.updatePreviewSearchResponse("")}}}),on),Bn=n(15),Vn=n(14),Nn=n(1),Rn=n(39),En=n(25),zn=n(22),An=n(217),Ln=n(31),Fn=n(9);function Gn(e){switch(e){case Qn:return"MasterConflictID";case qn:return"UndefinedConflictID";case Zn:return"LazyBookedConflictsConflictID";case Yn:return"InvalidConflictID";default:return e}}var Pn,Mn,Wn,Un,Hn,Xn,Jn,Kn,_n,Qn="4uQeVj5tqViQh7yWWGStvkEG1Zmhx6uasJtWCJziofM",qn="11111111111111111111111111111111",Zn="JEKNVnkbo3jma5nREBBJCDoXFVeKkD56V3xKrvRmWxFF",Yn="JEKNVnkbo3jma5nREBBJCDoXFVeKkD56V3xKrvRmWxFG",$n=n(101),er=n(0),tr=Object(c.b)("globalStore")(Pn=Object(c.c)(Pn=function(e){Object(Bn.a)(n,e);var t=Object(Vn.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.route,n=e.title,r=this.props.globalStore.explorerAddress;return Object(er.jsx)("a",{href:"".concat(r,"/").concat(t),target:"_blank",rel:"noopener noreferrer",children:n})}}]),n}(Nn.Component))||Pn)||Pn,nr=Object(c.b)("tangleStore")(Mn=Object(c.c)(Mn=function(e){Object(Bn.a)(n,e);var t=Object(Vn.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.tangleStore.selectedBlk;return e&&Object(er.jsx)("div",{className:"selectedInfo",children:Object(er.jsx)(Ln.a,{style:{width:"100%"},children:Object(er.jsxs)(Ln.a.Body,{children:[Object(er.jsx)(Ln.a.Title,{children:Object(er.jsx)(tr,{route:"explorer/block/".concat(e.ID),title:e.ID})}),Object(er.jsxs)(Fn.a,{variant:"flush",children:[Object(er.jsxs)(Fn.a.Item,{children:["Strong Parents:",Object(er.jsx)(Fn.a,{children:e.strongParentIDs.map((function(e,t){return Object(er.jsx)(Fn.a.Item,{children:Object(er.jsx)(tr,{route:"explorer/block/".concat(e),title:e})},t)}))})]}),Object(er.jsxs)(Fn.a.Item,{children:["Weak Parents:",Object(er.jsx)(Fn.a,{children:e.weakParentIDs.map((function(e,t){return Object(er.jsx)(Fn.a.Item,{children:Object(er.jsx)(tr,{route:"explorer/block/".concat(e),title:e})},t)}))})]}),Object(er.jsxs)(Fn.a.Item,{children:["ShallowLike Parents:",Object(er.jsx)(Fn.a,{children:e.shallowLikeParentIDs.map((function(e,t){return Object(er.jsx)(Fn.a.Item,{children:Object(er.jsx)(tr,{route:"explorer/block/".concat(e),title:e})},t)}))})]}),e.isTx&&Object(er.jsxs)(Fn.a.Item,{children:["Transaction:"," ",Object(er.jsx)(tr,{route:"explorer/transaction/".concat(e.txID),title:e.txID})]}),Object(er.jsxs)(Fn.a.Item,{children:["ConflictIDs:"," ",Object(er.jsx)(Fn.a,{children:e.conflictIDs.map((function(e,t){return Object(er.jsx)(Fn.a.Item,{children:Object(er.jsx)(tr,{route:"explorer/conflict/".concat(e),title:Gn(e)})},t)}))})]}),Object(er.jsxs)(Fn.a.Item,{children:["isMarker: ",e.isMarker.toString()]}),Object(er.jsxs)(Fn.a.Item,{children:["ConfirmationState: ",e.confirmationState]}),Object(er.jsxs)(Fn.a.Item,{children:["Confirmed:"," ",e.isConfirmed.toString()]}),Object(er.jsxs)(Fn.a.Item,{children:["Confirmed Time:"," ",$n(new Date(e.confirmationStateTime/1e6),"dd.mm.yyyy HH:MM:ss")]})]})]})})})}}]),n}(Nn.Component))||Mn)||Mn,rr=n(19),ir=n(18),ar=n(35),cr=n(65),or=n(16),sr=n(36),lr=function(e){Object(Bn.a)(n,e);var t=Object(Vn.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=["BLK Confirmed","BLK Pending","BLK with TX Confirmed","BLK with TX Pending","Tip","Unknown"],t=[S,v,k,y,C,I],n=["Strong","Weak","Shallow Liked","Shallow Disliked"],r=[B,D,V,N],i=["solid","dashed","dotted","dotted"],a=[],c=[];for(var o in e)a.push(Object(er.jsxs)("div",{className:"legend-item",children:[Object(er.jsx)("div",{className:"legend-color",style:{backgroundColor:t[o]}}),Object(er.jsx)("div",{className:"legend-label",children:e[o]})]}));for(var s in c.push(Object(er.jsxs)("div",{className:"legend-item",children:[Object(er.jsx)("div",{className:"legend-color",style:{backgroundColor:S},children:Object(er.jsx)("div",{className:"legend-marker"})}),Object(er.jsx)("div",{className:"legend-label",children:"Marker"})]})),n)c.push(Object(er.jsxs)("div",{className:"legend-item",children:[Object(er.jsx)("div",{className:"link-type",style:{borderBottom:"".concat(i[s]," 2px ").concat(r[s])}}),Object(er.jsx)("div",{className:"legend-label",children:n[s]})]}));return Object(er.jsxs)(er.Fragment,{children:[Object(er.jsx)("div",{className:"legend",children:a}),Object(er.jsx)("div",{className:"legend",children:c})]})}}]),n}(Nn.Component),ur=function(e){Object(Bn.a)(n,e);var t=Object(Vn.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=["TX Confirmed","TX Pending"],t=[Ze,qe],n=[];for(var r in e)n.push(Object(er.jsxs)("div",{className:"legend-item",children:[Object(er.jsx)("div",{className:"legend-color",style:{backgroundColor:t[r]}}),Object(er.jsx)("div",{className:"legend-label",children:e[r]})]}));return Object(er.jsx)(er.Fragment,{children:Object(er.jsx)("div",{className:"legend",children:n})})}}]),n}(Nn.Component),hr=function(e){Object(Bn.a)(n,e);var t=Object(Vn.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=["Conflict conflict confirmed","Conflict conflict pending/rejected","Master conflict"],t=[at,it,lt],n=[];for(var r in e)n.push(Object(er.jsxs)("div",{className:"legend-item",children:[Object(er.jsx)("div",{className:"legend-color",style:{backgroundColor:t[r]}}),Object(er.jsx)("div",{className:"legend-label",children:e[r]})]}));return Object(er.jsx)(er.Fragment,{children:Object(er.jsx)("div",{className:"legend",children:n})})}}]),n}(Nn.Component),dr=Object(c.b)("tangleStore")(Wn=Object(c.b)("globalStore")(Wn=Object(c.c)(Wn=function(e){Object(Bn.a)(n,e);var t=Object(Vn.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).pauseResumeVisualizer=function(){r.props.tangleStore.pauseResume()},r.updateVerticesLimit=function(e){r.props.tangleStore.updateVerticesLimit(e.target.value)},r.updateSearch=function(e){r.props.tangleStore.updateSearch(e.target.value)},r.searchAndSelect=function(e){"Enter"===e.key&&r.props.tangleStore.searchAndSelect()},r.centerGraph=function(){r.props.tangleStore.centerEntireGraph()},r.syncWithBlk=function(){r.props.globalStore.syncWithBlk()},r.state={open:!0},r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.tangleStore.start()}},{key:"componentWillUnmount",value:function(){this.props.tangleStore.stop()}},{key:"render",value:function(){var e=this,t=this.props.tangleStore,n=t.paused,r=t.maxTangleVertices,i=t.search;return Object(er.jsxs)(Rn.a,{children:[Object(er.jsx)("div",{onClick:function(){return e.setState((function(e){return{open:!e.open}}))},children:Object(er.jsxs)("h2",{children:["Tangle DAG",this.state.open?Object(er.jsx)(zn.b,{}):Object(er.jsx)(zn.a,{})]})}),Object(er.jsx)(An.a,{in:this.state.open,children:Object(er.jsxs)("div",{className:"panel",children:[Object(er.jsxs)(En.a,{xs:5,children:[Object(er.jsxs)(rr.a,{className:"align-self-end",style:{display:"flex",justifyContent:"space-evenly"},children:[Object(er.jsx)(or.a,{className:"mb-1",children:Object(er.jsx)(cr.a,{trigger:["hover","focus"],placement:"right",overlay:Object(er.jsx)(ar.a,{id:"popover-basic",children:Object(er.jsx)(ar.a.Body,{children:"Pauses/resumes rendering the graph."})}),children:Object(er.jsx)(ir.a,{className:"button",onClick:this.pauseResumeVisualizer,variant:"outline-secondary",children:n?"Resume Rendering":"Pause Rendering"})})}),Object(er.jsx)(or.a,{className:"mb-1",children:Object(er.jsx)(ir.a,{className:"button",onClick:this.centerGraph,variant:"outline-secondary",children:"Center Graph"})}),Object(er.jsx)(or.a,{className:"mb-1",children:Object(er.jsx)(ir.a,{className:"button",onClick:this.syncWithBlk,variant:"outline-secondary",children:"Sync with blk"})})]}),Object(er.jsx)(rr.a,{children:Object(er.jsxs)(or.a,{className:"mb-1",children:[Object(er.jsx)(or.a.Text,{id:"vertices-limit",children:"Vertices Limit"}),Object(er.jsx)(sr.a,{placeholder:"limit",value:r.toString(),onChange:this.updateVerticesLimit,"aria-label":"vertices-limit","aria-describedby":"vertices-limit"})]})}),Object(er.jsx)(rr.a,{children:Object(er.jsxs)(or.a,{className:"mb-1",children:[Object(er.jsx)(or.a.Text,{id:"search-vertices",children:"Search Vertex"}),Object(er.jsx)(sr.a,{placeholder:"search",type:"text",value:i,onChange:this.updateSearch,"aria-label":"vertices-search",onKeyUp:this.searchAndSelect,"aria-describedby":"vertices-search"})]})})]}),Object(er.jsxs)("div",{className:"graphFrame",children:[Object(er.jsx)(nr,{}),Object(er.jsx)("div",{id:"tangleVisualizer"})]}),Object(er.jsx)(lr,{})]})}),Object(er.jsx)("br",{})]})}}]),n}(Nn.Component))||Wn)||Wn)||Wn,fr=Object(c.b)("utxoStore")(Un=Object(c.c)(Un=function(e){Object(Bn.a)(n,e);var t=Object(Vn.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.utxoStore.selectedTx;return e&&Object(er.jsx)("div",{className:"selectedInfo",children:Object(er.jsx)(Ln.a,{style:{width:"100%"},children:Object(er.jsxs)(Ln.a.Body,{children:[Object(er.jsx)(Ln.a.Title,{children:Object(er.jsx)(tr,{route:"explorer/transaction/".concat(e.ID),title:e.ID})}),Object(er.jsxs)(Fn.a,{variant:"flush",children:[Object(er.jsxs)(Fn.a.Item,{children:["Blk ID:",Object(er.jsx)(tr,{route:"explorer/messasge/".concat(e.blkID),title:e.blkID})]}),Object(er.jsxs)(Fn.a.Item,{children:["Inputs:",Object(er.jsx)(Fn.a,{children:e.inputs.map((function(e,t){return Object(er.jsx)(Fn.a.Item,{children:Object(er.jsx)(tr,{route:"explorer/output/".concat(e.referencedOutputID.base58),title:e.referencedOutputID.base58})},t)}))})]}),Object(er.jsxs)(Fn.a.Item,{children:["Outputs:",Object(er.jsx)(Fn.a,{children:e.outputs.map((function(e,t){return Object(er.jsx)(Fn.a.Item,{children:Object(er.jsx)(tr,{route:"explorer/output/".concat(e),title:e})},t)}))})]}),Object(er.jsxs)(Fn.a.Item,{children:["ConfirmationState: ",e.confirmationState]}),Object(er.jsxs)(Fn.a.Item,{children:["Confirmed:"," ",e.isConfirmed.toString()]}),Object(er.jsxs)(Fn.a.Item,{children:["ConfirmationStateTime: "," ",$n(new Date(e.confirmationStateTime/1e6),"dd.mm.yyyy HH:MM:ss")]})]})]})})})}}]),n}(Nn.Component))||Un)||Un,pr=Object(c.b)("utxoStore")(Hn=Object(c.b)("globalStore")(Hn=Object(c.c)(Hn=function(e){Object(Bn.a)(n,e);var t=Object(Vn.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).pauseResumeVisualizer=function(){r.props.utxoStore.pauseResume()},r.updateVerticesLimit=function(e){r.props.utxoStore.updateVerticesLimit(e.target.value)},r.updateSearch=function(e){r.props.utxoStore.updateSearch(e.target.value)},r.searchAndSelect=function(e){"Enter"===e.key&&r.props.utxoStore.searchAndSelect()},r.centerGraph=function(){r.props.utxoStore.centerEntireGraph()},r.syncWithTx=function(){r.props.globalStore.syncWithTx()},r.state={isIdle:!0,open:!0},r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.utxoStore.start()}},{key:"componentWillUnmount",value:function(){this.props.utxoStore.stop()}},{key:"render",value:function(){var e=this,t=this.props.utxoStore,n=t.paused,r=t.maxUTXOVertices,i=t.search;return Object(er.jsxs)(Rn.a,{children:[Object(er.jsx)("div",{onClick:function(){return e.setState((function(e){return{open:!e.open}}))},children:Object(er.jsxs)("h2",{children:["UTXO DAG",this.state.open?Object(er.jsx)(zn.b,{}):Object(er.jsx)(zn.a,{})]})}),Object(er.jsx)(An.a,{in:this.state.open,children:Object(er.jsxs)("div",{className:"panel",children:[Object(er.jsxs)(En.a,{xs:5,children:[Object(er.jsxs)(rr.a,{className:"align-self-end",style:{display:"flex",justifyContent:"space-evenly"},children:[Object(er.jsx)(or.a,{className:"mb-1",children:Object(er.jsx)(cr.a,{trigger:["hover","focus"],placement:"right",overlay:Object(er.jsx)(ar.a,{id:"popover-basic",children:Object(er.jsx)(ar.a.Body,{children:"Pauses/resumes rendering the graph."})}),children:Object(er.jsx)(ir.a,{className:"button",onClick:this.pauseResumeVisualizer,variant:"outline-secondary",children:n?"Resume Rendering":"Pause Rendering"})})}),Object(er.jsx)(or.a,{className:"mb-1",children:Object(er.jsx)(ir.a,{className:"button",onClick:this.centerGraph,variant:"outline-secondary",children:"Center Graph"})}),Object(er.jsx)(or.a,{className:"mb-1",children:Object(er.jsx)(ir.a,{className:"button",onClick:this.syncWithTx,variant:"outline-secondary",children:"Sync with tx"})})]}),Object(er.jsx)(rr.a,{children:Object(er.jsxs)(or.a,{className:"mb-1",children:[Object(er.jsx)(or.a.Text,{id:"vertices-limit",children:"Vertices Limit"}),Object(er.jsx)(sr.a,{placeholder:"limit",value:r.toString(),onChange:this.updateVerticesLimit,"aria-label":"vertices-limit","aria-describedby":"vertices-limit"})]})}),Object(er.jsx)(rr.a,{children:Object(er.jsxs)(or.a,{className:"mb-1",children:[Object(er.jsx)(or.a.Text,{id:"search-vertices",children:"Search Vertex"}),Object(er.jsx)(sr.a,{placeholder:"search",type:"text",value:i,onChange:this.updateSearch,"aria-label":"vertices-search",onKeyUp:this.searchAndSelect,"aria-describedby":"vertices-search"})]})})]}),Object(er.jsxs)("div",{className:"graphFrame",children:[Object(er.jsx)(fr,{}),Object(er.jsx)("div",{id:"utxoVisualizer"})]}),Object(er.jsx)(ur,{})]})}),Object(er.jsx)("br",{})]})}}]),n}(Nn.Component))||Hn)||Hn)||Hn,br=Object(c.b)("conflictStore")(Xn=Object(c.c)(Xn=function(e){Object(Bn.a)(n,e);var t=Object(Vn.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.conflictStore.selectedConflict;return e&&Object(er.jsx)("div",{className:"selectedInfo",children:Object(er.jsx)(Ln.a,{style:{width:"100%"},children:Object(er.jsxs)(Ln.a.Body,{children:[Object(er.jsx)(Ln.a.Title,{children:Object(er.jsx)(tr,{route:"explorer/conflict/".concat(Gn(e.ID)),title:e.ID})}),Object(er.jsxs)(Fn.a,{variant:"flush",children:[Object(er.jsxs)(Fn.a.Item,{children:["Parent:",Object(er.jsx)(Fn.a,{children:e.parents?e.parents.map((function(e,t){return Object(er.jsx)(Fn.a.Item,{children:Object(er.jsx)(tr,{route:"explorer/conflict/".concat(e),title:Gn(e)})},t)})):Object(er.jsx)(er.Fragment,{})})]}),Object(er.jsxs)(Fn.a.Item,{children:["Confirmed:"," ",e.isConfirmed.toString()]}),Object(er.jsxs)(Fn.a.Item,{children:["ConfirmationState: ",e.confirmationState]}),Object(er.jsxs)(Fn.a.Item,{children:["AW: ",e.aw]}),e.conflicts&&Object(er.jsxs)(Fn.a.Item,{children:["Conflicts:",e.conflicts.conflicts.map((function(e,t){return Object(er.jsxs)(Fn.a,{children:[Object(er.jsxs)(Fn.a.Item,{children:["OutputID:"," ",Object(er.jsx)(tr,{route:"explorer/output/".concat(e),title:e.outputID.base58})]}),Object(er.jsxs)(Fn.a.Item,{children:["Conflicts:",Object(er.jsx)(Fn.a,{children:e.conflictIDs.map((function(e,t){return Object(er.jsx)(Fn.a.Item,{children:Object(er.jsx)(tr,{route:"explorer/conflict/".concat(e),title:Gn(e)})},t)}))})]})]},t)}))]})]})]})})})}}]),n}(Nn.Component))||Xn)||Xn,jr=Object(c.b)("conflictStore")(Jn=Object(c.b)("globalStore")(Jn=Object(c.c)(Jn=function(e){Object(Bn.a)(n,e);var t=Object(Vn.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).pauseResumeVisualizer=function(){r.props.conflictStore.pauseResume()},r.updateVerticesLimit=function(e){r.props.conflictStore.updateVerticesLimit(e.target.value)},r.updateSearch=function(e){r.props.conflictStore.updateSearch(e.target.value)},r.searchAndHighlight=function(e){"Enter"===e.key&&r.props.conflictStore.searchAndHighlight()},r.centerGraph=function(){r.props.conflictStore.centerEntireGraph()},r.syncWithConflict=function(){r.props.globalStore.syncWithConflict()},r.state={isIdle:!0,open:!0},r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.conflictStore.start()}},{key:"componentWillUnmount",value:function(){this.props.conflictStore.stop()}},{key:"render",value:function(){var e=this,t=this.props.conflictStore,n=t.paused,r=t.maxConflictVertices,i=t.search;return Object(er.jsxs)(Rn.a,{children:[Object(er.jsx)("div",{onClick:function(){return e.setState((function(e){return{open:!e.open}}))},children:Object(er.jsxs)("h2",{children:["Conflict DAG",this.state.open?Object(er.jsx)(zn.b,{}):Object(er.jsx)(zn.a,{})]})}),Object(er.jsx)(An.a,{in:this.state.open,children:Object(er.jsxs)("div",{className:"panel",children:[Object(er.jsxs)(En.a,{xs:5,children:[Object(er.jsxs)(rr.a,{className:"align-self-end",style:{display:"flex",justifyContent:"space-evenly"},children:[Object(er.jsx)(or.a,{className:"mb-1",children:Object(er.jsx)(cr.a,{trigger:["hover","focus"],placement:"right",overlay:Object(er.jsx)(ar.a,{id:"popover-basic",children:Object(er.jsx)(ar.a.Body,{children:"Pauses/resumes rendering the graph."})}),children:Object(er.jsx)(ir.a,{className:"button",onClick:this.pauseResumeVisualizer,variant:"outline-secondary",children:n?"Resume Rendering":"Pause Rendering"})})}),Object(er.jsx)(or.a,{className:"mb-1",children:Object(er.jsx)(ir.a,{className:"button",onClick:this.centerGraph,variant:"outline-secondary",children:"Center Graph"})}),Object(er.jsx)(or.a,{className:"mb-1",children:Object(er.jsx)(ir.a,{className:"button",onClick:this.syncWithConflict,variant:"outline-secondary",children:"Sync with conflict"})})]}),Object(er.jsx)(rr.a,{children:Object(er.jsxs)(or.a,{className:"mb-1",children:[Object(er.jsx)(or.a.Text,{id:"vertices-limit",children:"Vertices Limit"}),Object(er.jsx)(sr.a,{placeholder:"limit",value:r.toString(),onChange:this.updateVerticesLimit,"aria-label":"vertices-limit","aria-describedby":"vertices-limit"})]})}),Object(er.jsx)(rr.a,{children:Object(er.jsxs)(or.a,{className:"mb-1",children:[Object(er.jsx)(or.a.Text,{id:"search-vertices",children:"Search Vertex"}),Object(er.jsx)(sr.a,{placeholder:"search",type:"text",value:i,onChange:this.updateSearch,"aria-label":"vertices-search",onKeyUp:this.searchAndHighlight,"aria-describedby":"vertices-search"})]})})]}),Object(er.jsxs)("div",{className:"graphFrame",children:[Object(er.jsx)(br,{}),Object(er.jsx)("div",{id:"conflictVisualizer"})]}),Object(er.jsx)(hr,{})]})}),Object(er.jsx)("br",{})]})}}]),n}(Nn.Component))||Jn)||Jn)||Jn,gr=n(23),mr=(n(453),n(216)),xr=n.n(mr),Or=Object(c.b)("globalStore")(Kn=Object(c.c)(Kn=function(e){Object(Bn.a)(n,e);var t=Object(Vn.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).setCurrent=function(){var t=In()();e.updateSearchTimes(t)},e.addTime=function(){var t=e.props.isStartTime?In.a.unix(e.props.globalStore.searchStartingTime):In.a.unix(e.props.globalStore.searchEndingTime);t=t.add(30,"seconds"),e.updateSearchTimes(t)},e.updateSearchTimes=function(t){e.props.isStartTime?(e.props.globalStore.updateSearchStartingTime(t),e.props.globalStore.updateStartManualPicker(!0)):(e.props.globalStore.updateSearchEndingTime(t),e.props.globalStore.updateEndManualPicker(!0))},e.subTime=function(){var t=e.props.isStartTime?In.a.unix(e.props.globalStore.searchStartingTime):In.a.unix(e.props.globalStore.searchEndingTime);t=t.subtract(30,"seconds"),e.updateSearchTimes(t)},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(er.jsx)("div",{children:Object(er.jsxs)("div",{className:"tripleButton",children:[Object(er.jsx)(ir.a,{className:"button button-wide button-left",variant:"outline-secondary",onClick:this.setCurrent,children:"Set current time"}),Object(er.jsx)(ir.a,{className:"button button-middle",variant:"outline-secondary",onClick:this.subTime,children:"-30s"}),Object(er.jsx)(ir.a,{className:"button button-right",variant:"outline-secondary",onClick:this.addTime,children:"+30s"})]})})}}]),n}(Nn.Component))||Kn)||Kn,vr=function(e){Object(Bn.a)(n,e);var t=Object(Vn.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).updateFrom=function(t){Object(wn.isMoment)(t)&&e.props.globalStore.updateSearchStartingTime(t)},e.updateTo=function(t){Object(wn.isMoment)(t)&&e.props.globalStore.updateSearchEndingTime(t)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.isStartTime?this.updateFrom:this.updateTo,t=this.props.onOpenFunc;return Object(er.jsx)(er.Fragment,{children:Object(er.jsx)(xr.a,{dateFormat:"DD/MM/YY",timeFormat:"h:mm:ss",onChange:e,value:this.props.dateTime,onOpen:t})})}}]),n}(Nn.Component),Sr=Object(c.b)("globalStore")(_n=Object(c.c)(_n=function(e){Object(Bn.a)(n,e);var t=Object(Vn.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).updateFrom=function(e){Object(wn.isMoment)(e)&&r.props.globalStore.updateSearchStartingTime(e)},r.updateTo=function(e){Object(wn.isMoment)(e)&&r.props.globalStore.updateSearchEndingTime(e)},r.searchVerticesInLedger=function(){r.setState({searching:!0,isIdle:!1}),r.props.globalStore.searchAndDrawResults().then((function(){return r.setState({searching:!1})}))},r.clearSearch=function(){r.setState({isIdle:!0}),r.props.globalStore.clearSearchAndResume()},r.updateFormInput=function(e){r.setState(Object(gr.a)({},e.target.name,e.target.value))},r.setExplorerAddress=function(e){"Enter"===e.key&&(r.props.globalStore.updateExplorerAddress(r.state.explorerAddress),r.setState({explorerAddress:""}))},r.syncWithBlk=function(){r.props.globalStore.syncWithBlk()},r.syncWithTx=function(){r.props.globalStore.syncWithTx()},r.syncWithConflict=function(){r.props.globalStore.syncWithConflict()},r.clearSync=function(){r.props.globalStore.clearSync()},r.onOpenStartPicker=function(){r.props.globalStore.updateStartManualPicker(!1)},r.onOpenEndPicker=function(){r.props.globalStore.updateEndManualPicker(!1)},r.renderSearchResults=function(){r.props.globalStore.renderSearchResults()},r.state={isIdle:!0,searching:!1,open:!0,searchOpen:!0,dashboardUrlOpen:!0,syncOpen:!0,explorerAddress:""},r}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props.globalStore.manualPicker?In.a.unix(this.props.globalStore.searchStartingTime):void 0,n=this.props.globalStore.manualPicker?In.a.unix(this.props.globalStore.searchEndingTime):void 0,r=this.props.globalStore,i=this.props.globalStore,a=i.searchResponse,c=i.previewResponseSize;return Object(er.jsxs)(Rn.a,{children:[Object(er.jsx)("div",{onClick:function(){return e.setState((function(e){return{open:!e.open}}))},children:Object(er.jsxs)("h2",{children:["Global Functions",this.state.open?Object(er.jsx)(zn.b,{}):Object(er.jsx)(zn.a,{})]})}),Object(er.jsx)(An.a,{in:this.state.open,children:Object(er.jsxs)("div",{children:[Object(er.jsxs)("div",{className:"panel",children:[Object(er.jsx)("div",{onClick:function(){return e.setState((function(e){return{searchOpen:!e.searchOpen}}))},children:Object(er.jsxs)("h5",{children:["Search Vertex Within Time Intervals"," ",this.state.searchOpen?Object(er.jsx)(zn.b,{}):Object(er.jsx)(zn.a,{})]})}),Object(er.jsx)(An.a,{in:this.state.searchOpen,children:Object(er.jsxs)(En.a,{md:4,children:[Object(er.jsxs)(rr.a,{children:["From:"," ",Object(er.jsx)(vr,{isStartTime:!0,globalStore:r,dateTime:t,onOpenFunc:this.onOpenStartPicker}),Object(er.jsx)(Or,{isStartTime:!0})]}),Object(er.jsxs)(rr.a,{children:["To:"," ",Object(er.jsx)(vr,{isStartTime:!1,globalStore:r,dateTime:n,onOpenFunc:this.onOpenEndPicker}),Object(er.jsx)(Or,{isStartTime:!1})]}),Object(er.jsxs)(rr.a,{className:"align-self-end",children:[Object(er.jsx)(ir.a,{className:"button",onClick:this.searchVerticesInLedger,variant:"outline-secondary",children:this.state.searching?Object(er.jsxs)("div",{children:[Object(er.jsx)("span",{className:"spinner-border spinner-border-sm text-secondary"})," ","Searching..."]}):"Search"}),Object(er.jsx)(ir.a,{className:"button",onClick:this.renderSearchResults,variant:"outline-secondary",children:"Render"}),Object(er.jsx)(ir.a,{className:"button",disabled:this.state.isIdle,onClick:this.clearSearch,variant:"outline-secondary",children:"Clear and Resume"})]}),Object(er.jsx)(rr.a,{className:"align-self-end",style:{display:"flex",color:"red"},children:Object(er.jsxs)("div",{children:[Object(er.jsx)("p",{className:"response-info",children:c}),Object(er.jsx)("p",{children:a})]})})]})})]}),Object(er.jsxs)("div",{className:"panel",children:[Object(er.jsxs)("div",{onClick:function(){return e.setState((function(e){return{dashboardUrlOpen:!e.dashboardUrlOpen}}))},children:[Object(er.jsxs)("h5",{style:{marginTop:"10px"},children:["Set explorer URL"," ",this.state.dashboardUrlOpen?Object(er.jsx)(zn.b,{}):Object(er.jsx)(zn.a,{})]}),Object(er.jsxs)("p",{children:[" ","Default is the local explorer:"," ",Object(er.jsx)("i",{children:"http://localhost:8081"})," "]})]}),Object(er.jsx)(An.a,{in:this.state.dashboardUrlOpen,children:Object(er.jsx)(En.a,{xs:5,children:Object(er.jsx)(rr.a,{children:Object(er.jsx)(or.a,{className:"mb-3",children:Object(er.jsx)(sr.a,{placeholder:"explorer URL","aria-label":"explorer URL",name:"explorerAddress","aria-describedby":"basic-addon1",value:this.state.explorerAddress,onChange:this.updateFormInput,onKeyUp:this.setExplorerAddress})})})})})]}),Object(er.jsxs)("div",{className:"panel",children:[Object(er.jsxs)("div",{onClick:function(){return e.setState((function(e){return{syncOpen:!e.syncOpen}}))},children:[Object(er.jsxs)("h5",{children:["Select and center vertex across DAGs"," ",this.state.syncOpen?Object(er.jsx)(zn.b,{}):Object(er.jsx)(zn.a,{})]}),Object(er.jsxs)("p",{children:[" ","Select a block/transaction/conflict and click the corresponding button to sync."," "]})]}),Object(er.jsx)(An.a,{in:this.state.syncOpen,children:Object(er.jsxs)(En.a,{children:[Object(er.jsx)(rr.a,{xs:"auto",children:Object(er.jsx)(ir.a,{className:"button",onClick:this.syncWithBlk,variant:"outline-secondary",children:"Sync with block"})}),Object(er.jsx)(rr.a,{xs:"auto",children:Object(er.jsx)(ir.a,{className:"button",onClick:this.syncWithTx,variant:"outline-secondary",children:"Sync with transaction"})}),Object(er.jsx)(rr.a,{xs:"auto",children:Object(er.jsx)(ir.a,{className:"button",onClick:this.syncWithConflict,variant:"outline-secondary",children:"Sync with conflict"})}),Object(er.jsx)(rr.a,{xs:"auto",children:Object(er.jsx)(ir.a,{className:"button",onClick:this.clearSync,variant:"outline-secondary",children:"Clear"})})]})})]})]})}),Object(er.jsx)("br",{})]})}}]),n}(Nn.Component))||_n)||_n,yr=n(459),kr=n.p+"static/media/logo_dark.eec42e74.png",Cr=function(e){Object(Bn.a)(n,e);var t=Object(Vn.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).connect=function(){b("/ws",(function(){console.log("connection opened")}),e.reconnect,(function(){console.log("connection error")}))},e.reconnect=function(){setTimeout((function(){e.connect()}),1e3)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.connect()}},{key:"render",value:function(){return Object(er.jsxs)(er.Fragment,{children:[Object(er.jsx)(yr.a,{className:"nav",children:Object(er.jsx)("img",{src:kr,alt:"DAGs Visualizer",style:{height:"50px"}})}),Object(er.jsxs)(Rn.a,{children:[Object(er.jsx)(En.a,{children:Object(er.jsx)(Sr,{})}),Object(er.jsx)(En.a,{children:Object(er.jsx)(dr,{})}),Object(er.jsx)(En.a,{children:Object(er.jsx)(pr,{})}),Object(er.jsx)(En.a,{children:Object(er.jsx)(jr,{})})]})]})}}]),n}(Nn.Component),Tr=new Ae,wr=new Cn,Ir=new Tn,Dr={tangleStore:Tr,utxoStore:wr,conflictStore:Ir,globalStore:new Dn(Tr,wr,Ir)};a.render(Object(er.jsx)(c.a,Object(i.a)(Object(i.a)({},Dr),{},{children:Object(er.jsx)(Cr,{})})),document.getElementById("root"))}},[[454,1,2]]]);
//# sourceMappingURL=main.cd6c28e7.chunk.js.map